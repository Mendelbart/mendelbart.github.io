{
  "version": 3,
  "sources": ["../../src/js/helpers/object.js", "../../src/js/helpers/array.js", "../../src/js/helpers/dom.js", "../../src/js/helpers/random.js", "../../src/js/helpers/font.js", "../../src/json/fonts.json", "../../src/js/helpers/base64.js", "../../src/js/helpers/classes.js", "../../src/js/settings/settings.js", "../../src/js/game/dealer.js", "../../src/js/game/js-levenshtein.js", "../../src/js/dataset/symbol.js", "../../src/js/game/Game.js", "../../src/js/dataset/selector.js", "../../src/js/dataset/Dataset.js", "../../src/js/context.js", "../../src/js/index.js"],
  "sourcesContent": ["import {arraysEqual} from \"./array.js\";\n\n/**\n * @template {any} V\n * @template {any} W\n * @param {Object<string,V>} obj\n * @param {function(V,string,number): W} fn\n * @returns {Object<string,W>}\n */\nexport function map(obj, fn) {\n    return Object.fromEntries(\n        Object.entries(obj).map(\n            ([k, v], i) => [k, fn(v, k, i)]\n        )\n    );\n}\n\n/**\n * @template V\n * @param {Object<string,V>} obj\n * @param {function(V,string,number): boolean} fn\n * @returns {Object<string,V>}\n */\nexport function filter(obj, fn) {\n    return Object.fromEntries(\n        Object.entries(obj).filter(\n            ([k, v], i) => fn(v, k, i)\n        )\n    );\n}\n\n/**\n * @template V\n * @param {Object<string,V>} obj\n * @param {function(V,string,number): boolean} fn\n * @returns {string[]}\n */\nexport function filterKeys(obj, fn) {\n    return Object.entries(obj).filter(\n        ([k, v], i) => fn(v, k, i)\n    ).map(([k, _]) => k);\n}\n\n/**\n * @param {Object} object\n * @param {Array} keys\n * @returns {Object}\n */\nexport function withoutKeys(object, keys) {\n    const result = Object.assign({}, object);\n    for (const key of keys) {\n        delete result[key];\n    }\n    return result;\n}\n\n/**\n * @param {Object} object\n * @param {Array} keys\n * @param {boolean} [appendObject]\n * @returns {Array}\n */\nexport function extractKeys(object, keys, appendObject = true) {\n    const arr = keys.map((key) => object[key] ?? null);\n    if (appendObject)\n        arr.push(withoutKeys(object, keys));\n    return arr;\n}\n\n/**\n * @param {Object} object\n * @param {Iterable} keys\n * @param {boolean} warnOtherKeys\n * @returns {Object}\n */\nexport function onlyKeys(object, keys, warnOtherKeys = false) {\n    const keySet = new Set(keys);\n    const result = {};\n    for (const [key, value] of Object.entries(object)) {\n        if (keySet.has(key)) {\n            result[key] = value;\n        } else if (warnOtherKeys) {\n            console.warn(`Filtered out key \"${key}\".`);\n        }\n    }\n\n    return result;\n}\n\nexport function mapKeys(object, callback) {\n    return Object.fromEntries(Object.entries(object).map(([k, v]) => [callback(k), v]));\n}\n\nexport function mapKeyArrayToValues(keys, callback) {\n    return Object.fromEntries(keys.map(key => [key, callback(key)]));\n}\n\n/**\n * @typedef {\"none\"|\"all\"|string[]|Record<string,boolean>} SubsetSpecifier\n */\n\n/**\n * Convenience method for standardising a subset of keys. Useful for `checked` or `disabled` inputs.\n * Returns all keys for `value=true`, an empty array for `value=false`. Otherwise return the given subset.\n * @param {SubsetSpecifier} subset\n * @param {string[]} keys\n * @returns {Record<string,boolean>}\n */\nexport function subsetToBoolRecord(subset, keys) {\n    if (subset === \"none\") {\n        subset = []\n    } else if (subset === \"all\") {\n        subset = keys;\n    } else if (typeof subset === \"string\") {\n        throw new Error('Invalid subset string specifier - use \"none\" or \"all\".');\n    }\n\n    if (Array.isArray(subset)) {\n        const result = Object.fromEntries(keys.map(key => [key, false]));\n        for (const key of subset) {\n            result[key] = true;\n        }\n        return result;\n    }\n\n    if (!arraysEqual(Object.keys(subset).sort(), keys.sort())) {\n        console.log(subset, keys);\n        console.warn(\"Subset object keys don't match keys list.\");\n        console.log(Object.keys(subset).sort(), keys.sort());\n    }\n    return Object.fromEntries(keys.map(key => [key, !!subset[key]]));\n}\n", "/**\n * Returns array `sums` of cumulative sums: `sums[index] = arr[0] + ... + arr[index]`.\n * @param {number[]} arr\n * @returns number[]\n */\nexport function cumSums(arr) {\n    return arr.map((sum => value => sum += value)(0));\n}\n\n/**\n * Return the smallest `index` such that `val <= arr[index]`\n * @param {number} val\n * @param {number[]} arr\n * @returns number\n */\nexport function bisectLeft(val, arr) {\n    let lo = 0;\n    let hi = arr.length;\n    let mid;\n\n    while (lo < hi) {\n        mid = (lo + hi) >> 1;\n        if (arr[mid] < val) {\n            lo = mid + 1;\n        } else {\n            hi = mid;\n        }\n    }\n\n    return lo;\n}\n\n/**\n * Return the sum of the array values.\n * @param {number[]} arr\n * @returns {number}\n */\nexport function sum(arr) {\n    return arr.reduce((sum, cur) => sum + cur, 0);\n}\n\n/**\n * Return the average of the array values.\n * @param {number[]} arr\n * @returns {number}\n */\nexport function avg(arr) {\n    if (arr.length === 0) {\n        console.error(\"Cannot compute average of empty array.\");\n        return 0;\n    }\n    return sum(arr) / arr.length;\n}\n\n\n/**\n * @param {Array} a\n * @param {Array} b\n * @returns {boolean}\n */\nexport function arraysEqual(a, b) {\n    return a.length === b.length &&\n        a.every((element, index) => element === b[index]);\n}\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @param {function(T, number, Array<T>)} callback\n * @returns {number[]}\n */\nexport function filterIndices(arr, callback) {\n    return Array.from(arr.entries())\n            .filter(([i, v]) => callback(v, i, arr))\n            .map(([i, _]) => i);\n}\n\n/**\n * @param {number} start\n * @param {?number} [stop]\n * @param {number} step\n */\nexport function range(start, stop = null, step = 1) {\n    if (stop === null) {\n        stop = start;\n        start = 0;\n    }\n\n    const n = Math.ceil((stop - start) / step);\n\n    return new Array(n).fill(0).map((_, i) => start + step * i);\n}", "/**\n * @typedef {HTMLElement | NodeListOf<HTMLElement> | HTMLElement[] | HTMLCollection} HTMLElements\n */\n\nimport * as ObjectHelper from './object.js';\n\nlet IdPrefixCounter = 0;\nwindow.hasTouch = 'ontouchstart' in window;\n\n/**\n * @type {Record<string. HTMLTemplateElement>}\n */\nconst TEMPLATES = {};\n\n/**\n * @param {Record<string,string>} htmls\n */\nexport function registerTemplates(htmls) {\n    for (const [key, html] of Object.entries(htmls)) {\n        registerTemplate(key, html);\n    }\n}\n\n/**\n * Register a template, which can be retrieved as a Node using `getTemplate(key)`.\n * @param {string} key\n * @param {string|Node} html\n */\nexport function registerTemplate(key, html) {\n    if (key in TEMPLATES) {\n        console.warn(`Overwriting existing template key ${key}.`);\n    }\n\n    const template = document.createElement(\"TEMPLATE\");\n    if (typeof html === \"string\") {\n        template.insertAdjacentHTML(\"beforeend\",  html);\n    } else {\n        template.append(html);\n    }\n\n    TEMPLATES[key] = template;\n}\n\n\n/**\n * @param {string} key\n * @returns {HTMLElement}\n */\nexport function getTemplate(key) {\n    if (!(key in TEMPLATES)) {\n        console.error(\"Unknown template key \" + key);\n    }\n    return TEMPLATES[key].firstChild.cloneNode(true);\n}\n\nregisterTemplates({\n    buttonLabel: `<label class=\"button\"></label>`,\n    buttonInput: `<input class=\"button-check form-input\" autocomplete=\"off\">`\n});\n\n/**\n * @param {string} type\n * @param {string} value\n * @param {string | Node | null} labelContent\n * @param {string | null} id\n * @returns {[HTMLInputElement, HTMLLabelElement]} [inputNode, labelNode]\n */\nexport function button(type, value, labelContent = null, id = null) {\n    const input = getTemplate(\"buttonInput\");\n    const label = getTemplate(\"buttonLabel\");\n    id ??= uniqueIdPrefix(\"button\") + value;\n\n    setAttrs(input, {\n        type: type,\n        value: value,\n        id: id\n    });\n    label.setAttribute(\"for\", id);\n\n    if (labelContent) {\n        if (typeof labelContent === \"string\") {\n            labelContent = document.createTextNode(labelContent);\n        }\n        label.appendChild(labelContent);\n    }\n\n    return [input, label];\n}\n\n/**\n * @param {string | Node} element - Element or ID to label.\n * @param {string} content\n * @param {string | null} [defaultId]\n */\nexport function label(element, content, defaultId = null) {\n    const label = document.createElement(\"LABEL\");\n    if (element instanceof Node) {\n        element = setDefaultId(element, defaultId);\n    }\n    label.setAttribute(\"for\", element);\n    label.textContent = content;\n    return label;\n}\n\n/**\n * @param {string} html\n * @returns {HTMLCollection}\n */\nexport function htmlToElements(html) {\n    const template = document.createElement(\"TEMPLATE\");\n    template.innerHTML = html;\n    return template.content.children;\n}\n\n/**\n * @param {string} html\n */\nexport function htmlToElement(html) {\n    const elements = htmlToElements(html);\n    if (elements.length !== 1) {\n        throw new Error(\"HTML doesn't contain exactly one element.\");\n    }\n    return elements[0];\n}\n\n/**\n * @param {string} str of the format tag#id.class1.class2 etc\n * @returns {HTMLElement}\n */\nexport function createElement(str) {\n    const [tagId, ...classes] = str.split(\".\");\n    const [tag, id] = tagId.split(\"#\");\n    const element = document.createElement(tag);\n\n    if (id) {\n        element.id = id;\n    }\n\n    element.classList.add(...classes);\n    return element;\n}\n\n/**\n *\n * @param {HTMLSelectElement} select\n * @param {Record<string,string>} data\n * @param {?string} [selected] default: first key of `data`\n * @param {string[]} [disabled]\n * @param {{label, keys}[]} [groups]\n */\nexport function setOptions(select, data, {\n    selected = null,\n    disabled = [],\n    groups = []\n} = {}) {\n    selected ??= Object.keys(data)[0];\n\n    const grouped = ObjectHelper.map(data, () => false);\n    let before = null;\n\n    for (const {label, keys} of groups) {\n        /** @type {HTMLOptGroupElement} **/\n        const optgroup = document.createElement(\"OPTGROUP\");\n        optgroup.label = label;\n        for (const key of keys) {\n            optgroup.append(createOption(key, data[key], selected, disabled));\n            grouped[key] = true;\n        }\n        select.add(optgroup);\n        if (!before) {\n            before = optgroup;\n        }\n    }\n\n    for (const [key, value] of Object.entries(data)) {\n        if (!grouped[key]) {\n            select.add(createOption(key, value, selected, disabled), before);\n        }\n    }\n}\n\nfunction createOption(key, value, selected, disabled) {\n    const option = document.createElement(\"OPTION\");\n    option.value = key;\n    option.textContent = value;\n    if (selected === key) {\n        option.selected = \"selected\";\n    }\n    if (disabled.includes(key)) {\n        option.disabled = \"disabled\";\n    }\n    return option;\n}\n\n/**\n * @param {Node} parent Parent node\n * @param {Node[] | NodeList} children Can be Object with Nodes as values.\n */\nexport function appendChildren(parent, children) {\n    for (const child of children) {\n        parent.appendChild(child);\n    }\n}\n\n/**\n * @param {Object.<string,Element>} elements\n * @param {string[] | string} keys\n * @param {string} attr\n * @param {string} [value]\n */\nexport function setAttrOnKeys(elements, keys, attr, value = \"\") {\n    if (!keys) {\n        return;\n    }\n    if (typeof keys === \"string\") {\n        keys = [keys];\n    }\n    for (const key of keys) {\n        elements[key].setAttribute(attr, value);\n    }\n}\n\n/**\n * Set the `attrs` on the `object`.\n * @param {Element} element\n * @param {Object.<string,string | boolean>} attrs\n */\nexport function setAttrs(element, attrs) {\n    for (const [key, value] of Object.entries(attrs)) {\n        if (typeof value === \"boolean\") {\n            if (value) {\n                element.setAttribute(key, key);\n            } else {\n                element.removeAttribute(key);\n            }\n        } else if (key === \"class\") {\n            addClass(element, value);\n        } else {\n            element.setAttribute(key, value);\n        }\n    }\n}\n\n/**\n * @param {string} prefix\n * @param {string} [connector] - default \"_\"\n * @returns {string}\n */\nexport function uniqueIdPrefix(prefix, connector = \"_\") {\n    IdPrefixCounter += 1;\n    return prefix + IdPrefixCounter + connector;\n}\n\n/**\n * If the node doesn't have an ID, set it to defaultId.\n * Return its ID.\n * @param {Element} element\n * @param {string} defaultId\n * @returns\n */\nexport function setDefaultId(element, defaultId) {\n    if (element.hasAttribute(\"id\")) {\n        element.id = defaultId;\n        return defaultId;\n    } else {\n        return element.id;\n    }\n}\n\n/**\n * @param {HTMLElements} elements\n * @param {function(HTMLElement): void} callback\n */\nexport function forEachElement(elements, callback) {\n    if (!elements) {\n        return;\n    }\n    if (elements instanceof Node) {\n        callback(elements);\n    } else {\n        for (const element of elements) {\n            callback(element);\n        }\n    }\n}\n\n/**\n * Toggle classes depending on the given `bool`: Add `trueClasses` and `falseClasses`\n * if `bool` is truthy, and vice versa.\n * @param {boolean} bool\n * @param {HTMLElements} elements\n * @param {string | string[]} trueClasses\n * @param {string | string[]} [falseClasses]\n */\nexport function classIfElse(bool, elements, trueClasses, falseClasses = null) {\n    if (!bool) {\n        [trueClasses, falseClasses] = [falseClasses, trueClasses];\n    }\n\n    trueClasses = classesToList(trueClasses);\n    falseClasses = classesToList(falseClasses);\n\n    forEachElement(elements, (elem) => {\n        elem.classList.remove(...falseClasses);\n        elem.classList.add(...trueClasses);\n    });\n}\n\n/**\n * @param {HTMLElements} elements\n * @param {string | string[]} classes\n */\nexport function addClass(elements, classes) {\n    classIfElse(true, elements, classes);\n}\n\n/**\n * @param {HTMLElements} elements\n * @param {string | string[]} classes\n */\nexport function removeClass(elements, classes) {\n    classIfElse(false, elements, classes);\n}\n\n/**\n * @param {HTMLElements} elements\n * @param {\"display\"|\"visibility\"|\"opacity\"} [property] default \"display\"\n */\nexport function show(elements, property = \"display\") {\n    forEachElement(elements, elem => {\n        elem.style.removeProperty(property);\n    });\n}\n\n\nconst hideValues = {\n    display: \"none\",\n    visibility: \"hidden\",\n    opacity: \"0\"\n}\n/**\n * @param {HTMLElements} elements\n * @param {\"display\"|\"visibility\"|\"opacity\"} [property] default \"display\"\n */\nexport function hide(elements, property = \"display\") {\n    forEachElement(elements, elem => {\n        elem.style.setProperty(property, hideValues[property]);\n    });\n}\n\n/**\n * @param {boolean} showFirst\n * @param {HTMLElements} first\n * @param {?HTMLElements} [second]\n * @param {\"display\"|\"visibility\"|\"opacity\"} [property] default \"display\"\n */\nexport function toggleShown(showFirst, first, second = null, property = \"display\") {\n    if (showFirst) {\n        if (second) {\n            hide(second, property);\n        }\n        show(first, property);\n    } else {\n        hide(first, property);\n        if (second) {\n            show(second, property);\n        }\n    }\n}\n\n/**\n * @param {string | string[]} classes\n * @returns {string[]}\n */\nexport function classesToList(classes) {\n    classes ??= [];\n    if (typeof classes === \"string\")\n        return classes.split(\" \");\n    return Array.from(classes);\n}\n\n/**\n * @param {HTMLElement} element element\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [box] default `\"border-box\"`\n * @param {boolean} [scrollSize] default `false`\n * @returns {[number,number]} [width, height]\n */\nexport function elementSize(element, box = \"border-box\", scrollSize = false) {\n    let width = scrollSize ? element.scrollWidth : element.clientWidth;\n    let height = scrollSize ? element.scrollHeight : element.clientHeight;\n\n    const style = window.getComputedStyle(element);\n\n    let scale = style.scale;\n    if (!scale || scale === \"none\") {\n        scale = 1;\n    } else {\n        scale = parseFloat(scale);\n    }\n\n    if (box === \"border-box\") {\n        width += scale * (parseFloat(style.borderLeftWidth || 0) + parseFloat(style.borderRightWidth || 0));\n        height += scale * (parseFloat(style.borderTopWidth || 0) + parseFloat(style.borderBottomWidth || 0));\n    } else if (box === \"content-box\") {\n        width -= scale * (parseFloat(style.paddingLeft || 0) + parseFloat(style.paddingRight || 0));\n        height -= scale * (parseFloat(style.paddingTop || 0) + parseFloat(style.paddingBottom || 0));\n    } else if (box !== \"padding-box\") {\n        console.error(\"Invalid value for element size box, use padding-box, content-box or border-box.\");\n    }\n\n    return [width, height];\n}\n\n\n/**\n * @param {HTMLElement} element\n * @param {?HTMLElement} [container] - default `element.parentElement`\n * @param {\"width\" | \"height\" | \"both\"} [dimension=\"width\"]\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [elementBox=\"border-box\"]\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [containerBox=\"content-box\"]\n * @param {boolean} [grow=false]\n */\nexport function computeScaleToFit(element, {\n    container = null,\n    dimension = \"width\",\n    elementBox = \"border-box\",\n    containerBox = \"content-box\",\n    grow = false\n} = {}) {\n    container ??= element.parentElement;\n\n    let [elementWidth, elementHeight] = elementSize(element, elementBox, true);\n    let [containerWidth, containerHeight] = elementSize(container, containerBox);\n\n    const scaleWidth = getScale(elementWidth, containerWidth, grow);\n    const scaleHeight = getScale(elementHeight, containerHeight, grow);\n\n    if (![\"width\", \"height\", \"both\"].includes(dimension)) {\n        console.error(\"Invalid dimension, use 'width', 'height' or 'both'.\");\n        dimension = \"width\";\n    }\n    return dimension === \"width\" ? scaleWidth : dimension === \"height\" ? scaleHeight : Math.min(scaleWidth, scaleHeight);\n}\n\n/**\n * @param {HTMLElement} element\n * @param options\n * @param {?HTMLElement} [options.container] - default `element.parentElement`\n * @param {\"width\" | \"height\" | \"both\"} [options.dimension=\"width\"]\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [options.elementBox=\"border-box\"]\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [options.containerBox=\"content-box\"]\n * @param {boolean} [options.grow=false]\n */\nexport function scaleToFit(element, options = {}) {\n    element.style.scale = computeScaleToFit(element, options);\n}\n\n\n/**\n * @param {HTMLElement[]} elements\n * @param options\n * @param {?HTMLElement[]} [options.containers] - default parentElements of the elements.\n * @param {\"width\" | \"height\" | \"both\"} [options.dimension=\"width\"]\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [options.elementBox=\"border-box\"]\n * @param {\"content-box\" | \"padding-box\" | \"border-box\"} [options.containerBox=\"content-box\"]\n * @param {boolean} [options.grow=false]\n * @param {number} [options.uniform=0]\n */\nexport function scaleAllToFit(elements, options = {}) {\n    const uniformFactor = options.uniform ?? 0;\n    const containers = options.containers ?? elements.map(element => element.parentElement);\n    if (\"container\" in options) {\n        console.warn(\"Can't set single container for scaleAllToFit.\");\n        delete options.container;\n    }\n\n    if (!Array.isArray(containers) || containers.length !== elements.length) {\n        console.error(\"Containers and elements length don't match.\");\n        return;\n    }\n\n    const scales = elements.map(\n        (element, index) => computeScaleToFit(\n            element,\n            Object.assign(options, {container: containers[index]})\n        )\n    );\n\n    if (uniformFactor > 0) {\n        const minScale = Math.min(...scales);\n        const newMaxScale = minScale / uniformFactor;\n        for (const [index, scale] of scales.entries()) {\n            scales[index] = Math.min(newMaxScale, scale);\n        }\n    }\n\n    for (const [index, element] of elements.entries()) {\n        element.style.scale = scales[index];\n    }\n}\n\nfunction getScale(elementSize, containerSize, grow = false) {\n    if (elementSize === 0) {\n        console.warn(\"getScale: Element's size is 0.\");\n        return 1;\n    }\n\n    if (isNaN(elementSize)) {\n        console.error(\"Element size is NaN.\");\n        return 1;\n    }\n    if (isNaN(containerSize)) {\n        console.error(\"Container size is NaN.\");\n        return 1;\n    }\n\n    let scale = containerSize / elementSize;\n\n    return grow ? scale : Math.min(scale, 1);\n}\n\n/**\n * @param {[function, ...*][]} updates\n * @param {string[]} fonts\n */\nexport function batchUpdate(updates, fonts = []) {\n    Promise.all(fonts.map(font => document.fonts.load(`16px \"${font}\"`))).then(() => {\n        requestAnimationFrame(() => {\n            for (const [update, ...args] of updates) {\n                update(...args);\n            }\n        });\n    });\n}\n\n\nexport function printError(error) {\n    const searchParams = new URLSearchParams(window.location.search);\n    if (searchParams.has(\"debug\", \"true\")) {\n        document.getElementById(\"errorlog\").append(error.toString(), document.createElement(\"br\"));\n    }\n    console.error(error);\n}\n\nexport function log(...args) {\n    const searchParams = new URLSearchParams(window.location.search);\n    if (searchParams.has(\"debug\", \"true\")) {\n        document.getElementById(\"errorlog\").append(...args.map(arg => arg.toString()), document.createElement(\"br\"));\n    }\n    console.log(...args);\n}\n\n\n/**\n * @param {HTMLElement} container\n */\nexport function setupPages(container) {\n    showPage(container.querySelector('.page-content'), container);\n\n    container.querySelector('.pages-next-button').addEventListener('click', () => {\n        showPage(document.getElementById(container.dataset.openPage).nextElementSibling, container);\n    });\n    container.querySelector('.pages-back-button').addEventListener('click', () => {\n        showPage(document.getElementById(container.dataset.openPage).previousElementSibling, container);\n    });\n}\n\n/**\n * @param {HTMLElement} page\n * @param {HTMLElement} [container]\n */\nexport function showPage(page, container = null) {\n    container ??= page.closest('.pages-container');\n    hide(container.querySelectorAll('.page-content'));\n    hide(container.querySelectorAll('.page-heading'));\n    show(page);\n    show(container.querySelector(`.page-heading[data-for=\"${page.id}\"]`));\n\n    container.dataset.openPage = page.id;\n\n    toggleShown(!!page.previousElementSibling, container.querySelector('.pages-back-button'));\n    toggleShown(\n        !!page.nextElementSibling,\n        container.querySelector('.pages-next-button'),\n        container.querySelector('.pages-finish-button')\n    );\n}\n\n/**\n * @param {Record<string, string|number|boolean>} params\n */\nexport function setSearchParams(params) {\n    const url = new URL(location);\n    let hasChanged = false;\n\n    for (const [key, value] of Object.entries(params)) {\n        const encodedValue = encodeURIComponent(value);\n\n        if (url.searchParams.get(key) !== encodedValue) {\n            url.searchParams.set(key, encodedValue);\n            hasChanged = true;\n        }\n    }\n\n    if (hasChanged) {\n        history.pushState({}, \"\", url);\n    }\n}\n", "import {bisectLeft, cumSums} from \"./array.js\";\n\n/**\n * Generate a PRNG seed from `str`.\n * @param {string} str\n * @returns {[number, number, number, number]}\n */\nfunction cyrb128(str) {\n    let h1 = 1779033703, h2 = 3144134277,\n        h3 = 1013904242, h4 = 2773480762;\n\n    for (let i = 0; i < str.length; i++) {\n        const k = str.charCodeAt(i);\n        h1 = h2 ^ Math.imul(h1 ^ k, 597399067);\n        h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);\n        h3 = h4 ^ Math.imul(h3 ^ k, 951274213);\n        h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);\n    }\n\n    h1 = Math.imul(h3 ^ (h1 >>> 18), 597399067);\n    h2 = Math.imul(h4 ^ (h2 >>> 22), 2869860233);\n    h3 = Math.imul(h1 ^ (h3 >>> 17), 951274213);\n    h4 = Math.imul(h2 ^ (h4 >>> 19), 2716044179);\n\n    h1 ^= (h2 ^ h3 ^ h4);\n    h2 ^= h1;\n    h3 ^= h1;\n    h4 ^= h1;\n\n    return [h1 >>> 0, h2 >>> 0, h3 >>> 0, h4 >>> 0];\n}\n\n/**\n * Simple Fast Counter. A pseudo-random number generator, initialized with\n * four 32-bit integers.\n * @param {number} a\n * @param {number} b\n * @param {number} c\n * @param {number} d\n * @returns {function(): number}\n */\nfunction sfc32(a, b, c, d) {\n    return function() {\n        a |= 0; b |= 0; c |= 0; d |= 0;\n        const t = (a + b | 0) + d | 0;\n        d = d + 1 | 0;\n        a = b ^ b >>> 9;\n        b = c + (c << 3) | 0;\n        c = (c << 21 | c >>> 11);\n        c = c + t | 0;\n        return (t >>> 0) / 4294967296;\n    }\n}\n\n/**\n * @param {string} seed\n * @returns {function(): number}\n */\nfunction seededPRNG(seed) {\n    return sfc32(...cyrb128(seed));\n}\n\n\nexport default class {\n    constructor(rand = Math.random) {\n        this._rand = rand;\n    }\n\n    /**\n     * rand()\n     * @param {?number} [a]\n     * @param {?number} [b]\n     * @returns {number}\n     * @example\n     * rand()           // random number in [0,1)\n     * rand(b)          // random number in [0,b)\n     * rand(a, b)       // random number in [a,b)\n     */\n    rand(a = null, b = null) {\n         if (b === null) {\n             return this._rand() * (a ?? 1);\n         }\n         a ??= 0;\n         return this._rand() * (b - a) + a;\n    }\n\n    /**\n     * @param {string} seed\n     * @returns {RandomNumberGenerator}\n     */\n    seed(seed) {\n        this._rand = seededPRNG(seed);\n    }\n\n    randInt(min, max) {\n        return Math.floor(this.rand(min, max));\n    }\n\n    /**\n     * Shuffle the array in-place.\n     * @param {*[]} array\n     */\n    shuffle(array) {\n        for (let length = array.length; length > 0; length--) {\n            const randomIndex = this.randInt(length);\n            if (randomIndex !== length - 1) {\n                [array[length - 1], array[randomIndex]] = [\n                    array[randomIndex], array[length - 1]\n                ];\n            }\n        }\n    }\n\n    randIndexFromWeights(weights) {\n        const sums = cumSums(weights);\n        return bisectLeft(this.rand(sums[sums.length - 1]), sums);\n    }\n}\n", "import * as ObjectHelper from \"./object.js\";\nimport {classIfElse} from './dom.js';\nimport _font_data from '../../json/fonts.json';\n\nconst FONT_DATA = Object.fromEntries(_font_data.map(font => [font.family, font]));\n\nconst FONT_PROPERTY_KEYS = {\n    family: \"font-family\",\n    weight: \"font-weight\",\n    scale: \"--font-scale\",\n    shift: \"--font-shift\",\n    styleset: \"font-variant-alternates\",\n    letterSpacing: \"--letter-spacing\",\n    lineHeight: \"--line-height\",\n};\n\nconst FONT_TRANSFORM_PROPERTIES = [\"shift\", \"scale\", \"letterSpacing\"];\n\n/**\n * @param {HTMLElement} element\n * @param {{family, weight?, shift?, scale?, styleset?}} properties\n */\nexport function setFont(element, properties) {\n    clearFont(element);\n    if (!properties.family) {\n        throw new Error(\"Key 'family' in properties required. Otherwise use setFontProperties instead.\");\n    }\n\n    const family = properties.family;\n    setFontFamily(element, family);\n    const newProps = Object.assign({}, properties);\n    const defaultData = FONT_DATA[family];\n    if (\"shift\" in defaultData) {\n        newProps.shift = defaultData.shift + (properties.shift ?? 0);\n    }\n    if (\"scale\" in defaultData) {\n        newProps.scale = defaultData.scale * (properties.scale ?? 1);\n    }\n    setFontProperties(element, newProps);\n}\n\n/**\n * @param family\n * @returns {Promise<Record<string,*>>}\n */\nexport function getFontData(family) {\n    return FONT_DATA[family];\n}\n\n/**\n * @param {HTMLElement} element\n * @param {{weight?, shift?, scale?, styleset?}} properties\n */\nexport function setFontProperties(element, properties) {\n    let transform = false;\n\n    for (const [key, value] of Object.entries(properties)) {\n        if (key === \"family\") {\n            continue;\n        }\n\n        if (!(key in FONT_PROPERTY_KEYS)) {\n            console.warn(`Unknown font property '${key}'`);\n            continue;\n        }\n\n        if (FONT_TRANSFORM_PROPERTIES.includes(key)) {\n            transform = true;\n        }\n\n        if (key === \"styleset\") {\n            if (!(\"family\" in properties)) {\n                console.error(\"Cannot set styleset without knowing family.\");\n            } else {\n                setStylesets(element, value, properties.family);\n            }\n        } else {\n            element.style.setProperty(FONT_PROPERTY_KEYS[key], value);\n        }\n    }\n\n    classIfElse(transform, element, \"font-transform\");\n}\n\nexport function setFontFamily(element, family) {\n    const font = FONT_DATA[family];\n    element.style.fontFamily = family + \", \" + (font.fallback ?? \"system-ui, sans-serif\");\n    setFontProperties(element, ObjectHelper.onlyKeys(font, FONT_TRANSFORM_PROPERTIES));\n}\n\n/**\n * @param {HTMLElement} element\n */\nexport function clearFont(element) {\n    for (const property of Object.values(FONT_PROPERTY_KEYS)) {\n        element.style.removeProperty(property);\n    }\n}\n\n/**\n * @param {HTMLElement} element\n * @param {string|string[]} stylesets\n * @param {string} family\n */\nfunction setStylesets(element, stylesets, family) {\n    stylesets = Array.isArray(stylesets) ? stylesets : [stylesets];\n\n    const variantStr = `styleset(${stylesets.join(\", \")})`\n\n    if (window.CSS.supports(\"font-variant-alternates\", variantStr)) {\n        element.style.setProperty(\"font-variant-alternates\", variantStr);\n    } else {\n        const ssIDs = stylesets.map(name => FONT_DATA[family].styleset[name]);\n        const ssIDsStr = ssIDs.map(id => `\"ss${id.toString().padStart(2, \"0\")}\"`).join(', ');\n        element.style.setProperty(\"font-feature-settings\", ssIDsStr);\n    }\n}\n", "[\n  {\n    \"family\": \"Noto Serif Hebrew\",\n    \"scale\": 1.25,\n    \"shift\": -0.05,\n    \"fallback\": \"serif\",\n    \"variationSettings\": {\n      \"wght\": \"100 900\",\n      \"wdth\": \"100\"\n    }\n  },\n  {\n    \"family\": \"Noto Sans Hebrew\",\n    \"scale\": 1.25,\n    \"shift\": -0.15,\n    \"variationSettings\": {\n      \"wght\": \"100 900\",\n      \"wdth\": \"100\"\n    }\n  },\n  {\n    \"family\": \"Noto Rashi Hebrew\",\n    \"scale\": 1.25,\n    \"shift\": -0.05,\n    \"fallback\": \"serif\",\n    \"variationSettings\": {\n      \"wght\": \"100 900\"\n    }\n  },\n  {\n    \"family\": \"Noto Serif\",\n    \"fallback\": \"serif\",\n    \"variationSettings\": {\n      \"wght\": \"100 900\",\n      \"wdth\": \"100\"\n    }\n  },\n  {\n    \"family\": \"Noto Sans\",\n    \"variationSettings\": {\n      \"wght\": \"100 900\",\n      \"wdth\": \"100\"\n    }\n  },\n  {\n    \"family\": \"Noto Sans Japanese\",\n    \"shift\": -0.06,\n    \"variationSettings\": {\n      \"wght\": \"100 900\"\n    }\n  },\n  {\n    \"family\": \"Noto Serif Japanese\",\n    \"fallback\": \"serif\",\n    \"shift\": -0.06,\n    \"variationSettings\": {\n      \"wght\": \"100 900\"\n    }\n  },\n  {\n    \"family\": \"Noto Sans Arabic\",\n    \"scale\": 0.94,\n    \"variationSettings\": {\n      \"wght\": \"100 900\",\n      \"wdth\": \"100\"\n    }\n  },\n  {\n    \"family\": \"Noto Kufi Arabic\",\n    \"variationSettings\": {\n      \"wght\": \"100 900\"\n    }\n  },\n  {\n    \"family\": \"Noto Naskh Arabic\",\n    \"variationSettings\": {\n      \"wght\": \"400 700\"\n    }\n  },\n  {\n    \"family\": \"Noto Sans Phoenician\"\n  },\n  {\n    \"family\": \"Junicode\",\n    \"fallback\": \"serif\",\n    \"variationSettings\": {\n      \"wght\": \"300 700\",\n      \"wdth\": \"100\",\n      \"ENLA\": \"0\"\n    },\n    \"styleset\": {\n      \"Early-English-futhorc\": 12,\n      \"Elder-futhark\": 13,\n      \"Younger-futhark\": 14,\n      \"Long-branch-to-short-twig\": 15,\n      \"Latin-to-Gothic\": 19\n    }\n  }\n]\n", "\n/**\n * @param {boolean[]} boolArray\n * @returns {string}\n */\nexport function encodeBase64BoolArray(boolArray) {\n    return base64ToString(boolArrayToBase64(boolArray)) + \"~\" + encodeBase64Number(boolArray.length);\n}\n\n/**\n * @param {string} str\n * @returns {boolean[]}\n */\nexport function decodeBase64BoolArray(str) {\n    const [b64str, length] = str.split('~');\n    return boolArrayFromBase64(base64FromString(b64str), decodeBase64Number(length));\n}\n\n/**\n * @param {number} n\n * @returns {string}\n */\nexport function encodeBase64Number(n) {\n    return base64ToString(numberToBase64(n));\n}\n\n/**\n * @param {string} str\n * @returns {number}\n */\nexport function decodeBase64Number(str) {\n    return numberFromBase64(base64FromString(str));\n}\n\n/**\n * @param {boolean[]} arr\n */\nfunction boolArrayToBase64(arr) {\n    const values = new Array(Math.ceil(arr.length / 6));\n\n    let sum;\n    for (let charIndex = 0; charIndex < values.length; charIndex++) {\n        sum = 0;\n        for (let i = 0; i < 6; i++) {\n            if (arr[6 * charIndex + i]) {\n                sum += 1 << i;\n            }\n        }\n        values[charIndex] = sum;\n    }\n    return values;\n}\n\n/**\n * @param {number[]} values\n * @param {number} length\n */\nfunction boolArrayFromBase64(values, length) {\n    if (Math.ceil(length / 6) !== values.length) {\n        throw new Error(\"Lengths of base 64 values and resultant length don't match.\");\n    }\n\n    const arr = new Array(length);\n    for (const [i, value] of values.entries()) {\n        for (let j = 0; j < 6; j++) {\n            const index = 6 * i + j;\n            if (index >= length) {\n                break;\n            }\n\n            arr[index] = (value & (1 << j)) !== 0;\n        }\n    }\n\n    return arr;\n}\n\n/**\n * @param {number} n\n * @returns {number[]}\n */\nfunction numberToBase64(n) {\n    let arr = [];\n    while (n > 0) {\n        arr.push(n & 63);\n        n >>= 6;\n    }\n    return arr;\n}\n\n/**\n * @param {number[]} values\n * @returns {number}\n */\nfunction numberFromBase64(values) {\n    let num = 0;\n    for (const [i, value] of values.entries()) {\n        num += value << (6 * i);\n    }\n    return num;\n}\n\n/**\n * @param {number[]} values\n * @returns {string}\n */\nfunction base64ToString(values) {\n    return String.fromCharCode(...values.map(val => base64CharCode(val)));\n}\n\n/**\n * @param {string} str\n * @returns {number[]}\n */\nfunction base64FromString(str) {\n    const result = new Array(str.length);\n    for (let i = 0; i < str.length; i++) {\n        result[i] = base64ValueFromCharCode(str.charCodeAt(i));\n    }\n    return result;\n}\n\n/**\n * @param {number} n\n * @returns {number}\n */\nfunction base64CharCode(n) {\n    n &= 63;\n    if (n < 26) return n + 65;\n    if (n < 52) return n + (97 - 26);\n    if (n < 62) return n + (48 - 53);\n    return n === 62 ? 45 : 95;\n}\n\n/**\n * @param {number} cc\n * @returns {number}\n */\nfunction base64ValueFromCharCode(cc) {\n    if (cc >= 65 && cc < 91) return cc - 65;\n    if (cc >= 97 && cc < 123) return cc - 97 + 26;\n    if (cc >= 48 && cc < 58) return cc - 48 + 53;\n    if (cc === 45) return 62;\n    if (cc === 95) return 63;\n    throw new Error(\"Unknown base 64 char code.\");\n}\n", "// CONVENIENCE CLASSES\nexport class FunctionStack {\n    constructor() {\n        /**\n         * @type {Function[]}\n         * @private\n         */\n        this._funcs = [];\n    }\n\n    /**\n     * @param {Function} funcs\n     */\n    push(...funcs) {\n        this._funcs.push(...funcs);\n    }\n\n    /**\n     * @param {Function} func\n     */\n    remove(func) {\n        const index = this._funcs.indexOf(func);\n        if (index !== -1) {\n            this._funcs.splice(index, 1);\n        } else {\n            throw new Error(`Unknown func ${func}.`);\n        }\n    }\n\n    call(...args) {\n        for (const func of this._funcs) {\n            func.call(...args);\n        }\n    }\n}\n", "import {FunctionStack, ObjectHelper, DOMHelper} from \"../helpers/helpers.js\";\n\n/**\n * @interface Setting\n *//**\n * @name Setting#value\n *//**\n * @type {HTMLElement}\n * @name Setting#node\n *//**\n * @type {FunctionStack}\n * @name Setting#updateListeners\n *//**\n * @function\n * @name Setting#setDisabled\n * @param {boolean} disabled\n *//**\n * @function\n * @name Setting#label\n * @param {string} labelString\n *//**\n * @function\n * @name Setting#remove\n */\n\n/** @class SettingsCollection */\nexport class SettingsCollection {\n    constructor() {\n        /**\n         * @type {Record<string, Setting>}\n         */\n        this.settings = {};\n        /**\n         * @type {string[]}\n         */\n        this.keys = [];\n    }\n\n    /**\n     * @param {Record<string,Setting>} settings\n     * @param {?string[]} [orderedKeys]\n     * @returns {SettingsCollection}\n     */\n    static createFrom(settings, orderedKeys = null) {\n        const collection = new this();\n        collection.put(settings, orderedKeys);\n        return collection;\n    }\n\n    /**\n     *\n     * @param {Record<string,Setting>} settings\n     * @param {?string[]} [orderedKeys]\n     */\n    put(settings, orderedKeys = null) {\n        orderedKeys ??= Object.keys(settings);\n        for (const key of orderedKeys) {\n            this.add(key, settings[key]);\n        }\n    }\n\n    /**\n     * @param {SettingsCollection} sc\n     */\n    extend(sc) {\n        this.put(sc.settings, sc.keys);\n    }\n\n    /**\n     * @param {string} key\n     * @param {Setting} setting\n     * @param {\"begin\"|\"end\"|\"beforeKey\"|\"afterKey\"} [position] default \"end\"\n     * @param {?string} [anchorKey]\n     */\n    add(key, setting, position = \"end\", anchorKey = null) {\n        this.settings[key] = setting;\n        if (position === \"end\") {\n            this.keys.push(key);\n        } else {\n            let index;\n            if (position === \"begin\") {\n                index = 0;\n            } else {\n                index = this.keys.indexOf(anchorKey);\n                if (position === \"afterKey\") {\n                    index++;\n                } else if (position !== \"beforeKey\") {\n                    console.error(\"Invalid insert setting insert position.\")\n                }\n            }\n\n            this.keys.splice(index, 0, key);\n        }\n    }\n\n    /**\n     * @param {string} key\n     */\n    remove(key) {\n        this.settings[key].remove();\n        delete this.settings[key];\n    }\n\n    removeAll() {\n        for (const setting of Object.values(this.settings)) {\n            setting.remove();\n        }\n        this.settings = {};\n        this.keys = [];\n    }\n\n    /**\n     * Replace the setting at the given `key` with a new setting.\n     * @param key\n     * @param setting\n     */\n    replace(key, setting) {\n        this.settings[key].node.replaceWith(setting.node);\n        this.settings[key] = setting;\n    }\n\n    getValues() {\n        return ObjectHelper.map(this.settings, setting => setting.value);\n    }\n\n    setValues(values) {\n        for (const [key, value] of Object.entries(values)) {\n            this.settings[key].value = value;\n        }\n    }\n\n    /**\n     * @param {string} key\n     */\n    getValue(key) {\n        return this.settings[key].value;\n    }\n\n    /**\n     * @param {string} key\n     * @returns {HTMLElement}\n     */\n    getNode(key) {\n        return this.settings[key].node;\n    }\n\n    /**\n     * @param {string} key\n     * @returns {Setting}\n     */\n    getSetting(key) {\n        return this.settings[key];\n    }\n\n    /**\n     * @returns {HTMLElement[]}\n     */\n    nodeList() {\n        return this.keys.map(key => this.settings[key].node);\n    }\n\n    /**\n     * @param {?string | string[]} keys\n     * @param {function} listeners\n     *\n     * @example collection.addUpdateListener((value) => console.log(value));\n     * @example collection.addUpdateListener(\"firstSettingKey\", (value) => console.log(value));\n     */\n    addUpdateListener(keys, ...listeners) {\n        if (typeof keys === \"function\") {\n            for (const setting of Object.values(this.settings)) {\n                setting.updateListeners.push(keys, ...listeners);\n            }\n        } else {\n            if (typeof keys === \"string\") {\n                keys = [keys];\n            }\n            for (const key of keys) {\n                this.settings[key].updateListeners.push(...listeners);\n            }\n        }\n    }\n}\n\n/** @implements Setting */\nexport class ValueElement {\n    static idCount = 0;\n    static updateEvent = \"change\"\n    /** @type {HTMLDivElement} */\n    node\n    /** @type {HTMLSelectElement | HTMLTextAreaElement | HTMLInputElement} */\n    valueNode\n\n    /**\n     * @param {HTMLElement} node\n     */\n    constructor(node) {\n        let valueNode;\n        if (this.constructor.isValueNode(node)) {\n            valueNode = node;\n        } else {\n            valueNode = node.querySelector(\"input, textarea, select\");\n            if (!this.constructor.isValueNode(valueNode)) {\n                throw new Error(\"Couldn't find element of type input, textarea or select.\");\n            }\n        }\n\n        this.node = DOMHelper.createElement(\"div.setting.labeled-value-element\");\n        this.node.append(node);\n        this.valueNode = valueNode;\n        this.updateListeners = new FunctionStack();\n\n        this._onChange = this._onChange.bind(this);\n\n        this.valueNode.addEventListener(this.constructor.updateEvent, this._onChange);\n    }\n\n    /**\n     * @param {string} type\n     * @param {?string} [label]\n     * @param {?Record<string,string>} [attrs]\n     * @returns {ValueElement}\n     */\n    static createInput(type, label = null, attrs = null) {\n        const input = document.createElement(\"INPUT\");\n        input.type = type;\n        if (attrs) {\n            DOMHelper.setAttrs(input, attrs);\n        }\n        const ve = new this(input);\n\n        if (label) {\n            ve.label(label);\n        }\n        return ve;\n    }\n\n    /**\n     * @param {Record<string,string>} data\n     * @param {{selected?, disabled?, groups?, id?, label?}} options\n     */\n    static createSelect(data, options = {}) {\n        const select = document.createElement(\"select\");\n        DOMHelper.setOptions(select, data, options);\n\n        const ve = new this(select);\n        if (options.id) {\n            ve.setId(options.id);\n        }\n        if (options.label) {\n            ve.label(options.label);\n        }\n\n        return ve;\n    }\n\n    /**\n     * @param {HTMLElement} node\n     */\n    static isValueNode(node) {\n        const tag = node.tagName;\n        return tag === \"SELECT\" || tag === \"TEXTAREA\" || (tag === \"INPUT\" && node.type !== \"hidden\");\n    }\n\n    isCheckbox() {\n        return this.valueNode.tagName === \"INPUT\" && this.valueNode.type === \"checkbox\";\n    }\n\n    get value() {\n        return this.isCheckbox() ? this.valueNode.checked : this.valueNode.value;\n    }\n\n    set value(value) {\n        if (this.isCheckbox()) {\n            this.valueNode.checked = value;\n        } else {\n            this.valueNode.value = value;\n        }\n    }\n\n    _onChange() {\n        this.updateListeners.call(this, this.value);\n    }\n\n    setDisabled(disabled) {\n        this.valueNode.disabled = disabled;\n    }\n\n    /**\n     * @param {string | {prefix}} data\n     * @returns {string}\n     */\n    setId(data = {prefix: \"\"}) {\n        const id = typeof data === \"string\" ? data : this.constructor.generateId(data.prefix);\n        this.valueNode.id = id;\n        const labelElement = this.node.querySelector(\"label\");\n        if (labelElement) {\n            labelElement.htmlFor = id;\n        }\n        return id;\n    }\n\n    static generateId(prefix = \"\") {\n        return \"ve_\" + prefix + this.idCount.toString().padStart(4, \"0\");\n    }\n\n    /**\n     * @param {string} labelString\n     */\n    label(labelString) {\n        if (!labelString) return;\n\n        let labelElement = this.node.querySelector(\"label\");\n        if (!labelElement) {\n            labelElement = document.createElement(\"label\");\n\n            if (!this.valueNode.id) {\n                this.setId();\n            }\n            labelElement.htmlFor = this.valueNode.id;\n\n            this.node.prepend(labelElement);\n        }\n\n        labelElement.textContent = labelString;\n    }\n\n    remove() {\n        this.valueNode.removeEventListener(this.constructor.updateEvent, this._onChange);\n        this.node.remove();\n    }\n}\n\nDOMHelper.registerTemplate(\"buttonGroupContainer\", DOMHelper.createElement(\"fieldset.button-group\"));\n\n/** @implements Setting */\nexport class ButtonGroup {\n    static nameCount = 0\n\n    /** @type {HTMLFieldSetElement} */\n    node\n    /** @type {Record<string, HTMLInputElement>} */\n    inputs\n\n    /**\n     * @param {HTMLFieldSetElement} node\n     * @param {boolean} exclusive\n     * @param {boolean} [decheckable=false]\n     */\n    constructor(node, exclusive, decheckable = false) {\n        this.node = node;\n        this.updateListeners = new FunctionStack();\n\n        this.inputs = Object.fromEntries(\n            Array.from(this.node.querySelectorAll(\"INPUT\")).map(input => [input.value, input])\n        );\n        this.exclusive = exclusive;\n        this.decheckable = decheckable;\n\n        this._onChange = this._onChange.bind(this);\n        this.node.addEventListener(\"change\", this._onChange);\n    }\n\n    /**\n     * @param {Record<string,string> | string[]} data\n     * @param {boolean} [exclusive=false]\n     * @param {?string} [name]\n     * @param {?string|string[]|Record<string,boolean>} [checked]\n     * @param {?string|string[]|Record<string,boolean>} [disabled]\n     * @param {boolean} [decheckable=false]\n     * @param {?string} [label]\n     * @returns {ButtonGroup}\n     */\n    static from(data, {\n        exclusive = false,\n        name= null,\n        checked = null,\n        disabled = null,\n        decheckable = false,\n        label = null\n    } = {}) {\n        if (Array.isArray(data)) {\n            data = Object.fromEntries(data.map(x => [x, x]));\n        }\n\n        const values = Object.keys(data);\n        const type = exclusive ? \"radio\" : \"checkbox\";\n        name ??= this.generateName();\n\n        const container = DOMHelper.getTemplate(\"buttonGroupContainer\");\n\n        if (exclusive) {\n            container.setAttribute(\"role\", \"radiogroup\");\n\n            if (typeof checked === \"string\") {\n                checked = [checked];\n            }\n\n            if (!decheckable && !checked) {\n                checked = [values[0]];\n            }\n        }\n\n        checked = ObjectHelper.subsetToBoolRecord(checked ?? \"none\", values);\n        disabled = ObjectHelper.subsetToBoolRecord(disabled ?? \"none\", values);\n\n        for (const [value, displayName] of Object.entries(data)) {\n            const [input, label] = DOMHelper.button(type, value, displayName);\n\n            input.name = exclusive ? name : `${name}_${value}`;\n            input.disabled = disabled[value];\n            input.checked = checked[value];\n\n            container.append(input, label);\n        }\n\n        if (exclusive && decheckable) {\n            container.addEventListener(\"click\", (e) => {\n                if (e.target.tagName === \"INPUT\" && e.target.checked) {\n                    e.target.checked = false;\n                }\n            });\n        }\n\n        const group = new this(container, exclusive, decheckable);\n        if (label) {\n            group.label(label);\n        }\n\n        return group;\n    }\n\n    static generateName() {\n        this.nameCount++;\n        return \"buttongroup_\" + this.nameCount.toString().padStart(4, \"0\");\n    }\n\n    /**\n     * @private\n     */\n    _onChange() {\n        this.updateListeners.call(this, this.value);\n    }\n\n    buttonCount() {\n        return Object.keys(this.inputs).length;\n    }\n\n    /**\n     * @param {boolean | null} checked\n     */\n    disableIfSingleButton(checked = null) {\n        if (this.buttonCount() === 1) {\n            this.setDisabled(true);\n            if (checked !== null) {\n                this.value = checked ? Object.keys(this.inputs) : [];\n            }\n        } else {\n            this.setDisabled(false);\n        }\n    }\n\n    get value() {\n        if (this.exclusive && !this.decheckable) {\n            for (const input of Object.values(this.inputs)) {\n                if (input.checked) {\n                    return input.value;\n                }\n            }\n            return null;\n        }\n\n        return ObjectHelper.filterKeys(this.inputs, input => input.checked);\n    }\n\n    /**\n     * @param {string|string[]|Record<string,boolean>} checked\n     */\n    set value(checked) {\n        checked = ObjectHelper.subsetToBoolRecord(checked, Object.keys(this.inputs));\n        for (const [key, input] of Object.entries(this.inputs)) {\n            input.checked = checked[key];\n        }\n    }\n\n    /**\n     * @param {boolean} disabled\n     */\n    setDisabled(disabled) {\n        for (const input of Object.values(this.inputs)) {\n            input.disabled = disabled;\n        }\n    }\n\n    /**\n     * @param labelString\n     */\n    label(labelString) {\n        const legendElement = document.createElement(\"LEGEND\");\n        legendElement.textContent = labelString;\n        this.node.prepend(legendElement);\n    }\n\n    remove() {\n        this.node.addEventListener(\"change\", this._onChange);\n        this.node.remove();\n    }\n}\n\nDOMHelper.registerTemplate(\"slider\", `<div class=\"slider-container\">\n    <span class=\"range-min\"></span><span class=\"range-value\"></span><span class=\"range-max\"></span>\n    <input type=\"range\" class=\"form-range\">\n</div>`);\n\n/** @implements Setting */\nexport class Slider extends ValueElement {\n    static updateEvent = \"input\";\n    /**\n     * @param {HTMLElement} node\n     * @param {number} min\n     * @param {number} max\n     */\n    constructor(node, min, max) {\n        super(node);\n        if (this.valueNode.tagName !== \"INPUT\" || this.valueNode.type !== \"range\") {\n            throw new Error(\"Couldn't find input type='range' element.\");\n        }\n\n        this.min = min;\n        this.max = max;\n\n        this.displayValue = this.displayValue.bind(this);\n        this.updateProgress = this.updateProgress.bind(this);\n        this.displayMinMax();\n    }\n\n    /**\n     * @param {number} min\n     * @param {number} max\n     * @param {?number} [value] default min\n     */\n    static create(min, max, value = null) {\n        const node = DOMHelper.getTemplate(\"slider\");\n        const input = node.lastElementChild;\n        input.min = min;\n        input.max = max;\n        input.setAttribute(\"step\", 1);\n\n        const slider = new this(node, min, max);\n        if (value !== null) {\n            slider.value = value;\n        }\n\n        return slider;\n    }\n\n    _onChange() {\n        super._onChange();\n        this.updateProgress();\n        this.displayValue();\n    }\n\n    updateProgress() {\n        this.valueNode.style.setProperty(\"--range-progress\", this.getProgress().toString());\n    }\n\n    getProgress() {\n        return (this.value - this.min) / (this.max - this.min);\n    }\n\n    displayValue() {\n        this.node.querySelector(\".range-value\").textContent = this.formatValue(this.value);\n    }\n\n    displayMinMax() {\n        this.node.querySelector(\".range-min\").textContent = this.formatValue(this.min);\n        this.node.querySelector(\".range-max\").textContent = this.formatValue(this.max);\n    }\n\n    isCheckbox() {\n        return false;\n    }\n\n    /**\n     * @param {number} value\n     */\n    set value(value) {\n        if (this.min > value || this.max < value) {\n            console.warn(\"Slider value outside range.\");\n        }\n        super.value = value.toString();\n        this.displayValue();\n        this.updateProgress();\n    }\n\n    get value() {\n        return parseFloat(this.valueNode.value);\n    }\n\n    /**\n     * @param {number} value\n     * @returns {string}\n     */\n    formatValue(value) {\n        return (Math.round(value * 100) / 100).toString();\n    }\n\n    setMin(min) {\n        if (this.valueNode.value < min) {\n            this.valueNode.value = min;\n            this._onChange();\n        }\n        this.min = min;\n        this.valueNode.min = min;\n        this.updateProgress();\n        this.displayMinMax();\n    }\n\n    setMax(max) {\n        if (this.valueNode.value > max) {\n            this.valueNode.value = max;\n            this._onChange();\n        }\n        this.max = max;\n        this.valueNode.max = max;\n        this.updateProgress();\n        this.displayMinMax();\n    }\n}\n", "import {RandomNumberGenerator, ArrayHelper} from \"../helpers/helpers.js\";\n\nexport class ItemDealer {\n    _punishFactor = 2\n    _manualPunish = 1\n    _previousDampFactor = 0.5\n\n    /**\n     *\n     * @param {any[]} items\n     */\n    constructor(items) {\n        this.items = items;\n        this.rng = new RandomNumberGenerator();\n\n        const n = this.itemCount = items.length;\n        this.hitCount = 0;\n\n        /** @type {number[]} */\n        this.scores = new Array(n).fill(0);\n        /** @type {number[]} */\n        this.tries = new Array(n).fill(0);\n        /** @type {number[]} */\n        this.triesLeft = new Array(n).fill(1);\n\n        this.totalTriesLeft = n;\n        this.maxTriesLeft = n;\n\n        this.currentIndex = this.rng.randInt(0, n);\n        /** @type {?number} */\n        this.previousIndex = null;\n    }\n\n    /**\n     * @param {string} seed\n     */\n    seed(seed) {\n        this.rng.seed(seed);\n    }\n\n    currentItem() {\n        return this.items[this.currentIndex];\n    }\n\n    nextItem() {\n        this.previousIndex = this.currentIndex;\n        this.currentIndex = this.rng.randIndexFromWeights(this.getWeights());\n        return this.currentItem();\n    }\n\n    /**\n     * @returns {number[]}\n     */\n    getWeights() {\n        const weights = this.triesLeft.slice();\n        if (this.previousIndex !== null) {\n            weights[this.previousIndex] *= this._previousDampFactor;\n        }\n        return weights;\n    }\n\n    updateTotalTriesLeft() {\n        const val = ArrayHelper.sum(this.triesLeft)\n        if (val > this.totalTriesLeft) {\n            this.maxTriesLeft += val - this.totalTriesLeft;\n        }\n        this.totalTriesLeft = val;\n    }\n\n    /**\n     * @returns {number}\n     */\n    progress() {\n        return 1 - this.totalTriesLeft / this.maxTriesLeft;\n    }\n\n    /**\n     * Set the score of the current item.\n     * @param score\n     */\n    enterScore(score) {\n        const tryIndex = ++this.tries[this.currentIndex];\n\n        if (tryIndex === 1) {\n            this.hitCount++;\n        }\n\n        this.scores[this.currentIndex] = Math.max(\n            this.scores[this.currentIndex],\n            score * this.scoreAtTryFactor(tryIndex)\n        );\n\n        this.triesLeft[this.currentIndex] += this._triesBoost(score) - 1;\n        if (this.triesLeft[this.currentIndex] <= 0) {\n            this.triesLeft[this.currentIndex] = 0;\n            this.itemCount--;\n        }\n\n        this.updateTotalTriesLeft();\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    isEmpty() {\n        return this.itemCount === 0;\n    }\n\n    /**\n     * @private\n     * @param {number} score\n     * @returns {number}\n     */\n    _triesBoost(score) {\n        return this._punishFactor * (1 - score);\n    }\n\n    /**\n     * @param tryIndex\n     * @returns {number}\n     */\n    scoreAtTryFactor(tryIndex) {\n        return 1 / tryIndex;\n    }\n\n    /**\n     * @param item\n     * @returns {number}\n     */\n    getItemIndex(item) {\n        return this.items.indexOf(item);\n    }\n\n    /**\n     * @param {number} index\n     * @param {number} [factor=1]\n     */\n    punish(index, factor = 1) {\n        this.triesLeft[index] += this._manualPunish * factor;\n        this.updateTotalTriesLeft();\n    }\n\n    /**\n     * @returns {number}\n     */\n    absoluteScore() {\n        return ArrayHelper.sum(this.scores);\n    }\n\n    /**\n     * @param {\"ratio\"|\"percent\"|\"both\"} mode\n     * @returns {string}\n     */\n    scoreString(mode = \"ratio\") {\n        const score = this.absoluteScore();\n        const ratioString = `${floor(score, 1, 2)}/${this.hitCount}`;\n        const percentString = this.hitCount > 0 ? formatPercent(score / this.hitCount) : formatPercent(0);\n        if (mode === \"ratio\") {\n            return ratioString;\n        } else if (mode === \"percent\") {\n            return percentString;\n        } else if (mode === \"both\") {\n            return `${ratioString} (${percentString})`;\n        } else {\n            console.error(`Unknown mode: ${mode}`);\n        }\n    }\n}\n\n/**\n * @param {number} x\n * @param {number} digits\n * @returns {string}\n */\nfunction formatPercent(x, digits = 0) {\n    return String(floor(x * 100, digits)) + \"%\"\n}\n\n/**\n * @param {number} x\n * @param {number} digits\n * @param {number} factor\n * @returns {number}\n */\nfunction floor(x, digits = 0, factor = 1) {\n    const digits_multiplier = Math.pow(10, digits) * factor;\n    return Math.floor(x * digits_multiplier) / digits_multiplier;\n}\n", "// Source: https://github.com/gustf/js-levenshtein/tree/v1.1.6\n\n/*\n\nMIT License\n\nCopyright (c) 2017 Gustaf Andersson\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n */\n\nfunction _min(d0, d1, d2, bx, ay) {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n}\n\n/**\n * @param {string} a\n * @param {string} b\n * @returns {number}\n */\nexport default function(a, b) {\n    if (a === b) {\n        return 0;\n    }\n\n    if (a.length > b.length) {\n        const tmp = a;\n        a = b;\n        b = tmp;\n    }\n\n    let la = a.length;\n    let lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n        la--;\n        lb--;\n    }\n\n    let offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n        offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n        return lb;\n    }\n\n    let x = 0;\n    let y;\n    let d0;\n    let d1;\n    let d2;\n    let d3;\n    let dd;\n    let dy;\n    let ay;\n    let bx0;\n    let bx1;\n    let bx2;\n    let bx3;\n\n    const vector = new Array(2 * la);\n\n    for (y = 0; y < la; y++) {\n        vector[2 * y] = y + 1;\n        vector[2 * y + 1] = a.charCodeAt(offset + y);\n    }\n\n    const len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n        bx0 = b.charCodeAt(offset + (d0 = x));\n        bx1 = b.charCodeAt(offset + (d1 = x + 1));\n        bx2 = b.charCodeAt(offset + (d2 = x + 2));\n        bx3 = b.charCodeAt(offset + (d3 = x + 3));\n        dd = (x += 4);\n        for (y = 0; y < len; y += 2) {\n            dy = vector[y];\n            ay = vector[y + 1];\n            d0 = _min(dy, d0, d1, bx0, ay);\n            d1 = _min(d0, d1, d2, bx1, ay);\n            d2 = _min(d1, d2, d3, bx2, ay);\n            dd = _min(d2, d3, dd, bx3, ay);\n            vector[y] = dd;\n            d3 = d2;\n            d2 = d1;\n            d1 = d0;\n            d0 = dy;\n        }\n    }\n\n    for (; x < lb;) {\n        bx0 = b.charCodeAt(offset + (d0 = x));\n        dd = ++x;\n        for (y = 0; y < len; y += 2) {\n            dy = vector[y];\n            vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n            d0 = dy;\n        }\n    }\n\n    return dd;\n}\n", "import {levenshtein} from \"../game/string-metrics.js\";\nimport {ArrayHelper, ObjectHelper} from \"../helpers/helpers.js\";\n\nexport class QuizItem {\n    /**\n     *\n     * @param {string} displayString\n     * @param {Record<string,ItemProperty>} properties\n     * @param {string} form\n     */\n    constructor(displayString, properties, form) {\n        this.displayString = displayString;\n        this.properties = properties;\n        this.form = form;\n    }\n}\n\n\nexport class ItemProperty {\n    constructor(value, maxDist) {\n        this.value = value;\n        this.maxDist = maxDist;\n        this.displayString = typeof value === \"string\" ? value : value.toString();\n    }\n\n    /**\n     * @param {*} data\n     * @param {Record<string,*>} propData\n     * @returns {ItemProperty}\n     */\n    static fromData(data, propData) {\n        let maxDist = propData.maxDist ?? 0;\n        const type = propData.type;\n\n        if (type === \"number\") {\n            return new NumberProperty(data, maxDist, propData.distanceMode ?? \"linear\");\n        } else if (type === \"string\") {\n            return new StringProperty(data, maxDist, propData.caseSensitive ?? false, propData.substitutions ?? {});\n        } else if (type === \"list\") {\n            let string;\n            let alternatives = {};\n            if (typeof data === \"string\") {\n                string = data;\n            } else {\n                if (!(\"source\" in data)) {\n                    console.error(\"Source of list property missing.\");\n                }\n                string = data.source;\n                if (\"alts\" in data) {\n                    alternatives = data.alts;\n                }\n            }\n\n            return new ListProperty(string, maxDist, alternatives, propData);\n        } else {\n            console.error(`Unknown property type \"${propData.type}\"`)\n        }\n    }\n\n    /**\n     * Returns the grade, a list of nodes with the marked guesses,\n     * and a list of nodes with the marked solution string.\n     *\n     * @param {string} guess\n     * @returns {[number, Node[], Node[]]}\n     */\n    grade(guess) {\n        const grade = this.gradeSingle(guess, this.value);\n        return [\n            grade,\n            guess.length > 0 ? [this.markGradedText(guess, grade)] : [],\n            [this.markGradedText(this.displayString, grade)]\n        ];\n    }\n\n    /**\n     * @param {number} grade\n     * @returns {boolean}\n     */\n    static passes(grade) {\n        return grade >= 0.5;\n    }\n\n    gradeSingle(guess, sol) {\n        const dist = this.distance(guess, sol);\n        if (dist <= this.maxDist) {\n            if (this.maxDist === 0) {\n                return 1;\n            }\n            return Math.pow(2, -dist / this.maxDist);\n        }\n\n        return 0;\n    }\n\n    markGradedText(text, grade) {\n        const span = document.createElement(\"SPAN\");\n        span.dataset.correct = grade === 1 ? \"true\" : grade > 0 ? \"partially\" : \"false\";\n        span.textContent = text;\n\n        return span;\n    }\n\n    /**\n     * @param a\n     * @param b\n     * @returns {number}\n     */\n    distance(a, b) {\n        console.error(\"Not implemented.\");\n    }\n}\n\n\nexport class NumberProperty extends ItemProperty {\n    /**\n     * @param {string|number} value\n     * @param {number} maxDist\n     * @param {\"linear\" | \"log\"} distanceMode\n     */\n    constructor(value, maxDist, distanceMode = \"linear\") {\n        let number, displayString;\n        if (typeof value === \"string\") {\n            number = parseFloat(value);\n            if (isNaN(number)) {\n                console.error(`Invalid number property value \"${value}\"`);\n            }\n            displayString = value;\n        } else {\n            number = value;\n            displayString = value.toString();\n        }\n\n        if (distanceMode === \"log\" && number === 0) {\n            console.error(\"Invalid value 0 for NumberProperty with distanceMode \\\"log\\\"\");\n        }\n\n        super(number, maxDist);\n        this.displayString = displayString;\n        this.distanceMode = distanceMode;\n    }\n\n    distance(a, b) {\n        return this.distanceMode === \"linear\" ? Math.abs(a - b) : Math.abs(Math.log(a / b));\n    }\n}\n\n\nexport class StringProperty extends ItemProperty {\n    /**\n     * @param {string} value\n     * @param {number} maxDist\n     * @param {boolean} caseSensitive\n     * @param {Record<string,string>} substitutions\n     */\n    constructor(value, maxDist, caseSensitive = false, substitutions = {}) {\n        super(value, maxDist);\n        this.caseSensitive = caseSensitive;\n        this.substitutions = substitutions;\n    }\n\n    /**\n     * @param {string} a\n     * @param {string} b\n     * @returns {number}\n     */\n    distance(a, b) {\n        return levenshtein(this.standardizeString(a), this.standardizeString(b));\n    }\n\n    /**\n     * @param {string} str\n     * @returns {string}\n     */\n    standardizeString(str) {\n        str = str.trim();\n        for (const [pattern, replacement] of Object.entries(this.substitutions)) {\n            str = str.replaceAll(new RegExp(pattern, 'g'), replacement);\n        }\n\n        str = str.normalize(\"NFKD\").replaceAll(/\\p{M}/gu, \"\");\n\n        if (!this.caseSensitive) {\n            str = str.toLowerCase();\n        }\n        return str;\n    }\n}\n\n\nexport class ListProperty extends StringProperty {\n    /**\n     * @param {string} displayString\n     * @param {number} maxDist\n     * @param {Record<string, string[] | string>} [alternatives]\n     * @param {\"best\"|\"avg\"} listMode\n     * @param {boolean} caseSensitive\n     * @param {string} splitter - regex string of splitters\n     * @param {string[]} excludeFromList\n     * @param {Record<string,string>} substitutions\n     */\n    constructor(\n        displayString,\n        maxDist,\n        alternatives = {}, {\n            listMode = \"best\",\n            caseSensitive = false,\n            splitter = \"[,;/]\",\n            excludeFromList = [\"\\\\(.*?\\\\)\"],\n            substitutions = {}}) {\n\n        displayString = displayString.trim();\n\n        super(displayString, maxDist, caseSensitive, substitutions);\n\n        this.splitter = splitter;\n        /**\n         * @type {SubString[]}\n         */\n        this.values = this.constructor.getValues(displayString, maxDist, this.splitter, excludeFromList);\n        if (alternatives) {\n            this.alternatives = ObjectHelper.map(alternatives, val => typeof val === \"string\" ? [val] : val);\n        } else {\n            this.alternatives = {};\n        }\n        this.listMode = listMode;\n    }\n\n    /**\n     * @param {string} displayString\n     * @param {number} maxDist\n     * @param {string|RegExp} splitter\n     * @param {string[]} excludeFromList\n     * @returns {SubString[]}\n     */\n    static getValues(displayString, maxDist, splitter, excludeFromList) {\n        let values = [new SubString(displayString)];\n\n        for (const pattern of [...excludeFromList, splitter]) {\n            values = values\n                .map(s => s.split(pattern))\n                .flat()\n                .map(s => s.trim())\n                .filter(x => x.end > x.start);\n        }\n\n        if (values.length === 0) {\n            console.warn(\"No values in list.\")\n        }\n\n        return values;\n    }\n\n    grade(guess) {\n        const guesses = new SubString(guess).split(this.splitter).map(s => s.trim());\n        const guessScores = new Array(guesses.length).fill(0);\n        const valueScores = new Array(this.values.length).fill(0);\n\n        for (const [i, value] of this.values.entries()) {\n            for (const [j, guess] of guesses.entries()) {\n                let score = this.gradeSingle(guess.str, value.str);\n\n                if (value.str in this.alternatives) {\n                    score = Math.max(score, ...this.alternatives[value.str].map(alt => this.gradeSingle(guess.str, alt)));\n                }\n\n                if (score > 0) {\n                    if (guessScores[j] > 0) {\n                        console.warn(\"Guess matches multiple values, maxDist too high.\");\n                    }\n                    valueScores[i] = Math.max(valueScores[i], score);\n                    guessScores[j] = Math.max(guessScores[j], score);\n                }\n            }\n        }\n\n        const grade = this.listMode === \"best\"\n            ? Math.max(...valueScores)\n            : ArrayHelper.avg(guessScores);\n\n        return [\n            grade,\n            this.markSubStrings(guesses, guessScores),\n            this.markSubStrings(this.values, valueScores)\n        ];\n    }\n\n    /**\n     * @param {SubString[]} subStrings\n     * @param {number[]} grades\n     * @returns {Node[]}\n     */\n    markSubStrings(subStrings, grades) {\n        if (subStrings.length === 0) {\n            return [];\n        }\n\n        const source = subStrings[0].source;\n        const nodes = [];\n\n        let pos = 0;\n\n        for (const [i, subString] of subStrings.entries()) {\n            if (pos < subString.start) {\n                nodes.push(document.createTextNode(source.substring(pos, subString.start)));\n            }\n\n            if (subString.start < subString.end) {\n                nodes.push(this.markGradedText(subString.str, grades[i]));\n\n                pos = subString.end;\n            }\n        }\n\n        if (pos < source.length) {\n            nodes.push(document.createTextNode(source.substring(pos)))\n        }\n\n        return nodes;\n    }\n}\n\n\nclass SubString {\n    /**\n     * @param {string|SubString} source\n     * @param {number} start\n     * @param {?number} [end]\n     * */\n    constructor(source, start = 0, end = null) {\n        if (source instanceof SubString) {\n            start += source.start;\n            if (end === null) {\n                end = source.end;\n            } else {\n                end += source.start;\n            }\n            source = source.source;\n        }\n\n        if (end === null) {\n            end = source.length;\n        }\n\n        this.source = source;\n        this.str = source.substring(start, end);\n        this.start = start;\n        this.end = end;\n    }\n\n    /**\n     * @param splitter\n     * @param {boolean} [includeEmpty]\n     * @returns {SubString[]}\n     */\n    split(splitter, includeEmpty = false) {\n        const result = [];\n        const matches = this.str.matchAll(splitter);\n\n        let i = 0;\n        for (const match of matches) {\n            if (!includeEmpty && i === match.index) {\n                continue;\n            }\n\n            result.push(new this.constructor(this, i, match.index));\n            i = match.index + match[0].length;\n        }\n\n        if (includeEmpty || i < this.end - this.start) {\n            result.push(new this.constructor(this, i));\n        }\n\n        return result;\n    }\n\n    /**\n     * @returns {SubString}\n     */\n    trim() {\n        const startTrim = this.str.match(/^\\s*/)[0].length;\n        const endTrim = this.str.match(/\\s*$/)[0].length;\n\n        if (startTrim === 0 && endTrim === 0) {\n            return this;\n        }\n\n        return new this.constructor(this.source, this.start + startTrim, this.end - endTrim);\n    }\n}\n", "import {DOMHelper, ObjectHelper, FontHelper, FunctionStack} from \"../helpers/helpers.js\";\nimport {ItemDealer} from \"./dealer.js\";\nimport {Slider, SettingsCollection} from \"../settings/settings.js\";\nimport {ItemProperty, ListProperty} from \"../dataset/symbol.js\";\n\n\nDOMHelper.registerTemplates({\n    eval: `<div class=\"item-eval\">\n    <span class=\"submitted\"></span><span class=\"solution\"></span>\n</div>`,\n    symbolContainer: `<div class=\"symbol-container\">\n    <div class=\"symbol-display-container\"><span class=\"symbol\"></span></div>\n    <div class=\"symbol-label-container\"><span class=\"symbol-label\"></span></div>\n</div>`\n});\n\nexport class Game {\n    /**\n     * @param {Dataset} dataset\n     * @param {QuizItem[]} items\n     * @param {string[]} properties\n     * @param {string} language\n     */\n\n    constructor(dataset, items, properties, language) {\n        this.dataset = dataset;\n        this.properties = properties;\n        this.language = language;\n        this.dealer = new ItemDealer(items);\n        this.onFinish = new FunctionStack();\n\n        this.updateProgressBar();\n\n        this.onInputKeydown = this.onInputKeydown.bind(this);\n        this._show = this._show.bind(this);\n        this.updateSymbolFontFamily = this.updateSymbolFontFamily.bind(this);\n    }\n\n    setup() {\n        this.setupSymbolContainer();\n        this.setupInputs();\n        this.setupEvals();\n        this.setupFontSettings();\n\n        document.getElementById(\"item-next-button\").textContent = \"Next\";\n    }\n\n    getInputMode(propType) {\n        if (propType === \"real\" || propType === \"integer\") {\n            return \"numeric\"\n        }\n\n        return \"text\";\n    }\n\n    setupSymbolContainer() {\n        const symbol = document.querySelector(\"#symbol-current .symbol\");\n        symbol.classList.add(\"symbol-\" + this.dataset.displayData.type);\n        symbol.setAttribute(\"lang\", this.dataset.metadata.lang);\n        symbol.setAttribute(\"dir\", this.dataset.metadata.dir);\n    }\n\n    setupInputs() {\n        /**\n         * @type {Object<string, HTMLInputElement>}\n         */\n        this.inputs = ObjectHelper.mapKeyArrayToValues(this.properties, prop => {\n            const input = document.createElement(\"INPUT\");\n            DOMHelper.setAttrs(input, {\n                type: \"text\",\n                inputmode: this.getInputMode(this.dataset.propsData[prop].type),\n                placeholder: this.dataset.propsData[prop].label\n            });\n            if (this.language && this.language !== \"default\") {\n                input.setAttribute(\"lang\", this.language);\n            }\n            return input;\n        });\n\n        const gameInputs = document.getElementById(\"game-inputs\");\n        gameInputs.replaceChildren(...Object.values(this.inputs));\n        gameInputs.addEventListener(\"keydown\", this.onInputKeydown);\n    }\n\n    /**\n     * @param {KeyboardEvent} event\n     */\n    onInputKeydown(event) {\n        /** @type HTMLInputElement */\n        const input = event.target.closest(\"INPUT\");\n        if (!input) return;\n\n        if (event.key === \"Enter\") {\n            if (input.nextElementSibling) {\n                input.nextElementSibling.focus();\n            } else {\n                document.getElementById(\"item-submit-button\").focus();\n            }\n        } else if (event.key === \"Backspace\" && event.target.value === \"\" && input.previousElementSibling) {\n            input.previousElementSibling.focus();\n            event.preventDefault();\n        }\n    }\n\n    setupEvals() {\n        this.evals = {};\n        const evalsContainer = document.getElementById(\"game-evals\");\n\n        for (const property of this.properties) {\n            const evalElement = DOMHelper.getTemplate(\"eval\");\n            this.evals[property] = evalElement;\n            evalsContainer.append(evalElement);\n        }\n    }\n\n    updateSymbolWeight(value) {\n        document.querySelector(\"#game-symbols\").style.setProperty(\"--symbol-weight\", value.toString());\n    }\n\n    updateSymbolFontFamily(key) {\n        document.querySelectorAll(\"#game-symbols .symbol-string\").forEach(element => {\n            this.setSymbolFont(element, key);\n        });\n        this.updateSymbolWeightRange(key);\n    }\n\n    updateSymbolWeightRange(key) {\n        const font = this.dataset.getFont(key);\n        const data = FontHelper.getFontData(font.family);\n        /**\n         * @type {Slider}\n         */\n        const weightRange = this.fontSettings.settings.weight;\n\n        if (data.variationSettings && data.variationSettings.wght) {\n            const [min, max] = data.variationSettings.wght.split(\" \").map(x => parseInt(x, 10));\n            weightRange.setMin(min);\n            weightRange.setMax(max);\n            DOMHelper.show(weightRange.node);\n        } else {\n            DOMHelper.hide(weightRange.node);\n        }\n    }\n\n    setupFontSettings() {\n        const weight = this.dataset.displayData.defaultWeight ?? 500\n        const weightSlider = Slider.create(100, 900, weight);\n        weightSlider.label(\"Weight\");\n        this.fontSettings = SettingsCollection.createFrom({\n            family: this.dataset.fontSetting(),\n            weight: weightSlider\n        });\n\n        document.querySelector(\"#font-settings\").replaceChildren(...this.fontSettings.nodeList());\n\n        this.fontSettings.addUpdateListener(\"weight\", this.updateSymbolWeight);\n        this.fontSettings.addUpdateListener(\"family\", this.updateSymbolFontFamily);\n        this.updateSymbolFontFamily(this.fontSettings.getValue(\"family\"));\n        this.updateSymbolWeight(weight);\n    }\n\n    setSymbolFont(element, key) {\n        FontHelper.setFont(element, this.dataset.getFont(key));\n    }\n\n    /**\n     * @param {Record<string,QuizItem[]>} referenceItems\n     */\n    setReferenceItems(referenceItems) {\n        this.referenceItems = referenceItems;\n    }\n\n    seed(seed) {\n        this.dealer.seed(seed);\n    }\n\n    cleanup() {\n        this.clearItemDisplay();\n        this.updateProgressBar(0);\n\n        document.getElementById(\"game-inputs\").removeEventListener(\"keydown\", this.onInputKeydown);\n        document.getElementById(\"game-inputs\").replaceChildren();\n        document.getElementById(\"game-evals\").replaceChildren();\n    }\n\n    finish() {\n        setTimeout(() => this.cleanup(), 100);\n        this.onFinish.call(this);\n    }\n\n    /**\n     * @returns {QuizItem}\n     */\n    currentItem() {\n        return this.dealer.currentItem();\n    }\n\n    submitRound() {\n        let score = 0;\n        const item = this.currentItem();\n\n        for (const [propertyKey, input] of Object.entries(this.inputs)) {\n            const evalElement = this.evals[propertyKey];\n            const property = item.properties[propertyKey];\n            const [grade, guessNodes, solutionNodes] = property.grade(input.value);\n\n            score += grade;\n\n            if (!ItemProperty.passes(grade)) {\n                const referenceItems = this.getReferenceItems(item.form, propertyKey, input.value);\n                if (referenceItems.length > 0) {\n                    const referenceNodes = this.referenceItemsNodes(referenceItems, propertyKey);\n                    document.getElementById(\"game-symbols\").append(...referenceNodes);\n                    this.updateSymbolFontFamily(this.fontSettings.getValue(\"family\"));\n\n                    for (const node of referenceNodes) {\n                        this.scaleItemNodeContents(node);\n                    }\n\n                    for (const item of referenceItems) {\n                        this.dealer.punish(this.dealer.getItemIndex(item), 1 / referenceItems.length);\n                    }\n                }\n            }\n\n            evalElement.querySelector(\".submitted\").replaceChildren(...guessNodes);\n            evalElement.querySelector(\".solution\").replaceChildren(...solutionNodes);\n            DOMHelper.classIfElse(\n                property instanceof ListProperty && property.listMode === \"best\",\n                evalElement,\n                \"best-mode\"\n            );\n        }\n\n        score /= this.properties.length;\n        this.dealer.enterScore(score);\n\n        this.updateProgressBar();\n        if (this.dealer.isEmpty()) {\n            document.getElementById(\"item-next-button\").textContent = \"Finish\";\n        }\n        this.show(\"evals\");\n\n        if (window.scrollY > 0) {\n            window.scrollTo({top: 0, behavior: \"smooth\"});\n        }\n    }\n\n    /**\n     * @param {string} form\n     * @param {string} property\n     * @param {string} guess\n     */\n    getReferenceItems(form, property, guess) {\n        if (!this.referenceItems) {\n            return [];\n        }\n\n        const items = [];\n        const grades = [];\n\n        for (const item of this.referenceItems[form]) {\n            const grade = item.properties[property].grade(guess)[0];\n            if (ItemProperty.passes(grade)) {\n                items.push(item);\n                grades.push(grades);\n            }\n        }\n\n        if (Math.max(...grades) === 1) {\n            return items.filter((_, index) => grades[index] === 1);\n        }\n\n        return items;\n    }\n\n    /**\n     * @param {QuizItem[]} items\n     * @param {string} property\n     * @returns {HTMLElement[]}\n     */\n    referenceItemsNodes(items, property) {\n        return items.map(item => this.referenceItemNode(item, property));\n    }\n\n    /**\n     * @param {QuizItem} item\n     * @param {string} property\n     * @returns {HTMLElement}\n     */\n    referenceItemNode(item, property) {\n        const container = DOMHelper.getTemplate(\"symbolContainer\");\n        container.classList.add(\"symbol-reference\");\n        container.querySelector('.symbol').classList.add(\"symbol-\" + this.dataset.displayData.type);\n\n        this.updateItemNode(container, item, property, false);\n        return container;\n    }\n\n    /**\n     * @param {HTMLElement} node\n     * @param {QuizItem} item\n     * @param {?string} property\n     * @param {boolean} scale\n     */\n    updateItemNode(node, item, property = null, scale = true) {\n        property ??= this.properties[0];\n        node.querySelector('.symbol').textContent = item.displayString;\n        node.querySelector('.symbol-label').textContent = item.properties[property].displayString;\n        if (scale) {\n            this.scaleItemNodeContents(node);\n        }\n    }\n\n    /**\n     * @param {HTMLElement} node\n     */\n    scaleItemNodeContents(node) {\n        DOMHelper.scaleToFit(node.querySelector('.symbol'));\n        DOMHelper.scaleToFit(node.querySelector('.symbol-label'));\n    }\n\n    clearInputs() {\n        for (const input of Object.values(this.inputs)) {\n            input.value = \"\";\n        }\n    }\n\n    /**\n     * @param {\"inputs\"|\"evals\"} which\n     */\n    show(which) {\n        this.shown = which;\n        requestAnimationFrame(this._show);\n    }\n\n    _show() {\n        DOMHelper.toggleShown(\n            this.shown === \"inputs\",\n            [\n                document.getElementById(\"game-inputs\"),\n                document.getElementById(\"item-submit-button\")\n            ],\n            [\n                document.getElementById(\"game-evals\"),\n                document.getElementById(\"item-next-button\")\n            ]\n        );\n\n        DOMHelper.toggleShown(\n            this.shown === \"inputs\",\n            null, document.querySelector('#symbol-current .symbol-label'),\n            \"visibility\"\n        );\n\n        if (this.shown === \"inputs\") {\n            document.querySelectorAll(\"#game-symbols .symbol-reference\").forEach(el => {\n                el.remove();\n            });\n            this.focus();\n        } else {\n            document.getElementById(\"item-next-button\").focus();\n        }\n    }\n\n    updateProgressBar(value = null) {\n        value ??= this.dealer.progress();\n        document.getElementById(\"progress-bar\").style.setProperty(\"--progress\", value);\n    }\n\n    newRound() {\n        if (this.dealer.isEmpty()) {\n            this.finish();\n            return;\n        }\n\n        this.dealer.nextItem();\n        this.displayItem(this.currentItem());\n\n        this.clearInputs();\n        this.show(\"inputs\");\n    }\n\n    focus() {\n        this.inputs[this.properties[0]].focus({preventScroll: true});\n    }\n\n    /**\n     * @param {QuizItem} item\n     */\n    displayItem(item) {\n        this.updateItemNode(document.getElementById('symbol-current'), item);\n    }\n\n    clearItemDisplay() {\n        document.querySelector(\"#symbol-current .symbol\").textContent = \"\";\n        document.querySelector('#symbol-current .symbol-label').textContent = \"\";\n    }\n}\n", "import {DOMHelper, ObjectHelper, FontHelper, ArrayHelper, FunctionStack} from \"../helpers/helpers.js\";\nconst range = ArrayHelper.range;\nimport {ButtonGroup} from \"../settings/settings.js\";\n\nconst STYLE_PROPERTIES = {\n    buttonMinWidth: \"--button-min-width\",\n    buttonMaxWidth: \"--button-max-width\",\n    symbolSize: \"--symbol-size\",\n    labelGap: \"--label-gap\",\n    symbolMinWidth: \"--symbol-min-width\",\n}\n\nconst BLOCK_KEYS = [\n    \"mode\", \"indices\", \"transpose\", \"nColumns\", \"dblClickGroups\",\n    \"rowLabels\", \"columnLabels\", \"rowLabelPosition\", \"columnLabelPosition\",\n    \"rangeSelectionMode\"\n];\n\n\nexport default class ItemSelector {\n    /**\n     * @param {DatasetItem[]} items\n     * @param {Dataset} dataset\n     */\n    constructor(items, dataset) {\n        this.items = items;\n        this.dataset = dataset;\n        this.formsData = dataset.formsData;\n        this.selectorData = dataset.selectorData;\n        this.updateListeners = new FunctionStack();\n\n        // Bind event listener functions\n        this.onBlockLabelClick = this.onBlockLabelClick.bind(this);\n        this.onBlockButtonClick = this.onBlockButtonClick.bind(this);\n        this.onBlockLabelPointerOverOut = this.onBlockLabelPointerOverOut.bind(this);\n        this.onBlockLabelPointerDown = this.onBlockLabelPointerDown.bind(this);\n        this.onBlockLabelPointerUpCancel = this.onBlockLabelPointerUpCancel.bind(this);\n        this.onBlockRangePointerDown = this.onBlockRangePointerDown.bind(this);\n        this.onBlockRangePointerMove = this.onBlockRangePointerMove.bind(this);\n        this.onBlockRangePointerUpCancel = this.onBlockRangePointerUpCancel.bind(this);\n    }\n\n    /**\n     * @param {?(boolean[])} itemsActive\n     * @param {?(string[])} checkedForms\n     * @param {?string} datasetKey\n     */\n    setup(itemsActive = null, checkedForms = null, datasetKey = null) {\n        this.node = DOMHelper.createElement(\"div.item-selector\");\n        if (datasetKey) {\n            this.node.setAttribute(\"data-dataset\", datasetKey);\n        }\n\n        this.setupFormsSetting(checkedForms);\n        this.setupButtons();\n\n        this.setupBlocks();\n        this.setActive(this.processItemsActive(itemsActive));\n\n        this.updateButtons(false);\n    }\n\n    setupButtons() {\n        /** @type {boolean[]} */\n        this.itemsActive = new Array(this.items.length).fill(false);\n        /** @type {HTMLElement[]} */\n        this.buttons = this.items.map((item, index) => this.getItemButton(item, index.toString()));\n    }\n\n    setupBlocks() {\n        const blocks =\n            this.selectorData.block\n                ? [this.selectorData.block]\n                : this.selectorData.blocks\n                    ? this.selectorData.blocks\n                    : [{mode: \"flex\"}];\n\n        this.blocks = blocks.map(data => ObjectHelper.onlyKeys(data, BLOCK_KEYS, true));\n\n        const blockIndices = this.processIndexSubsets(\n            blocks.map(block => block.indices ?? \"rest\"),\n            this.items.length,\n            true\n        );\n\n        for (const [blockIndex, block] of this.blocks.entries()) {\n            block.node = DOMHelper.createElement(\"div.selector-block\");\n            block.indices = blockIndices[blockIndex];\n            this.standardizeBlockIndices(block);\n\n            block.elements = [];\n\n            for (const [indexWithinBlock, index] of block.indices.entries()) {\n                const element = index === null ? this._gridGapElement() : this.buttons[index];\n                block.elements.push(element);\n                block.node.append(element);\n                element.dataset.indexWithinBlock = indexWithinBlock;\n            }\n\n            if (block.mode === \"grid\") {\n                block.node.classList.add(\"selector-block-grid\");\n                block.node.style.setProperty(\"--columns\", block.nColumns);\n            } else {\n                block.node.classList.add(\"selector-block-flex\");\n                if (this.dataset.metadata.dir === \"rtl\") {\n                    block.node.classList.add(\"flex-rtl\");\n                }\n            }\n\n            if (this.selectorData.label && this.selectorData.label.position === \"right\") {\n                this.node.classList.add(\"labels-right\");\n            }\n\n            block.node.setAttribute(\"data-block-index\", blockIndex.toString());\n            this.applyBlockStyle(block, this.selectorData.style, block.style);\n            this.processListenerIndices(block);\n            this.setupBlockListeners(block);\n\n            this.node.append(block.node);\n\n            try {\n                this.addBlockLabels(block);\n            } catch (e) {\n                console.error(\"Error occured while trying to add block labels.\");\n                console.error(e);\n            }\n        }\n    }\n\n    addBlockLabels(block) {\n        /** @type {number} */\n        const m = block.nColumns;\n        const n = Math.round(block.indices.length / m);\n\n        if (block.rowLabels) {\n            if (typeof block.rowLabels === \"string\") {\n                block.rowLabels = block.rowLabels.split(\"\");\n            }\n\n            if (!Array.isArray(block.rowLabels) || block.rowLabels.length !== n) {\n                throw new Error(\"Row labels no array or don't match number of rows.\");\n            }\n            const [pos, labelStart, labelEnd] = this._processLabelPosition(block.rowLabelPosition);\n            [block.rowLabelStart, block.rowLabelEnd] = [labelStart, labelEnd];\n\n            block.node.classList.add(`has-row-labels-${pos}`);\n\n            for (const [index, labelString] of block.rowLabels.entries()) {\n                let labelElement = this._labelElement(\"row\", labelString, index);\n                if (block.rowLabelStart) {\n                    block.elements[index * m].insertAdjacentElement(\"beforebegin\", labelElement);\n                }\n\n                if (block.rowLabelEnd) {\n                    if (block.rowLabelStart) {\n                        labelElement = labelElement.cloneNode(true);\n                    }\n\n                    if (index === m - 1) {\n                        block.node.insertAdjacentElement(\"beforeend\", labelElement);\n                    } else {\n                        block.elements[index * (m + 1)].insertAdjacentElement(\"beforebegin\", labelElement);\n                    }\n                }\n            }\n        }\n\n        if (block.columnLabels) {\n            if (typeof block.columnLabels === \"string\") {\n                block.columnLabels = block.columnLabels.split(\"\");\n            }\n\n            if (!Array.isArray(block.columnLabels) || block.columnLabels.length !== m) {\n                throw new Error(\"Column labels no array or don't match number of columns.\");\n            }\n            const [_, labelStart, labelEnd] = this._processLabelPosition(block.columnLabelPosition);\n            [block.columnLabelStart, block.columnLabelEnd] = [labelStart, labelEnd];\n\n            let labelElements = block.columnLabels.map(\n                (labelString, index) => this._labelElement(\"column\", labelString, index)\n            );\n\n            if (\"rowLabels\" in block) {\n                if (block.rowLabelStart) {\n                    labelElements.splice(0, 0, this._gridGapElement());\n                }\n                if (block.rowLabelEnd) {\n                    labelElements.push(this._gridGapElement());\n                }\n            }\n            if (block.columnLabelStart) {\n                block.node.prepend(...labelElements);\n            }\n            if (block.columnLabelEnd) {\n                if (block.columnLabelStart) {\n                    labelElements = labelElements.map(node => node.cloneNode(true));\n                }\n                block.node.append(...labelElements);\n            }\n        }\n    }\n\n    applyBlockStyle(block, ...styles) {\n        const style = Object.assign({}, ...styles);\n        if (\"buttonWidth\" in style) {\n            style.buttonMinWidth = style.buttonWidth;\n            style.buttonMaxWidth = style.buttonWidth;\n            delete style.buttonWidth;\n        }\n\n        for (const [prop, value] of Object.entries(style)) {\n            if (!(prop in STYLE_PROPERTIES)) {\n                console.error(`Invalid selector block style property ${prop}.`);\n            }\n            block.node.style.setProperty(STYLE_PROPERTIES[prop], value);\n        }\n    }\n\n    _gridGapElement() {\n        return DOMHelper.createElement(\"span.selector-grid-gap\");\n    }\n\n    /**\n     * @param {\"row\" | \"column\"} type\n     * @param {string} content\n     * @param {number} index\n     * @returns HTMLElement\n     * @private\n     */\n    _labelElement(type, content, index) {\n        if (content === null) {\n            return this._gridGapElement();\n        }\n        const element = DOMHelper.createElement(`span.block-label.block-${type}-label`);\n        element.textContent = content;\n        element.dataset.index = index.toString();\n\n        return element;\n    }\n\n    getButtonsFromIndices(indices) {\n        if (!indices) {\n            return [];\n        }\n        return indices.filter(index => index !== null).map(index => this.buttons[index]);\n    }\n\n    buttonsClassIfElse(boolean, indices, trueClasses, falseClasses = null) {\n        DOMHelper.classIfElse(boolean, this.getButtonsFromIndices(indices), trueClasses, falseClasses);\n    }\n\n    buttonsRemoveClass(indices, className) {\n        DOMHelper.removeClass(this.getButtonsFromIndices(indices), className);\n    }\n\n    buttonsAddClass(indices, className) {\n        DOMHelper.addClass(this.getButtonsFromIndices(indices), className);\n    }\n\n    /**\n     * @param {string} pos\n     * @returns {[string, boolean, boolean]} [pos, start, end]\n     * @private\n     */\n    _processLabelPosition(pos) {\n        pos ??= \"start\";\n        if (pos === \"both\") {\n            return [pos, true, true];\n        }\n        if (pos === \"end\") {\n            return [pos, false, true];\n        }\n        if (pos !== \"start\") {\n            console.error(\"Invalid label position, use 'start', 'end' or 'both'.\");\n        }\n        return [\"start\", true, false];\n    }\n\n    processListenerIndices(block) {\n        if (block.mode === \"grid\") {\n            block.indicesByRow = range(block.nRows).map(\n                i => range(block.nColumns).map(j => block.indices[i * block.nColumns + j]).filter(n => n !== null)\n            );\n            block.indicesByColumn = range(block.nColumns).map(\n                j => range(block.nRows).map(i => block.indices[i * block.nColumns + j]).filter(n => n !== null)\n            );\n        }\n\n        block.dblClickGroups ??= [range(block.indices.length)];\n        block.dblClickGroups = this.processIndexSubsets(block.dblClickGroups, block.indices.length);\n\n        for (const [groupIndex, indices] of block.dblClickGroups.entries()) {\n            for (const index of indices) {\n                block.elements[index].dataset.dblClickGroup = groupIndex;\n            }\n        }\n\n        // Switch from within-block indices (including gaps) to button indices\n        block.dblClickGroups = block.dblClickGroups.map(\n            indices => indices.map(index => block.indices[index]).filter(index => index !== null)\n        );\n    }\n\n    setupBlockListeners(block) {\n        block.node.addEventListener(\"click\", this.onBlockButtonClick);\n\n        this.resetRangeSelection();\n        block.node.addEventListener(\"pointerdown\", this.onBlockRangePointerDown);\n\n        if (block.mode === \"grid\") {\n            block.node.addEventListener(\"click\", this.onBlockLabelClick);\n            block.node.addEventListener(\"pointerover\", this.onBlockLabelPointerOverOut);\n            block.node.addEventListener(\"pointerout\", this.onBlockLabelPointerOverOut);\n            block.node.addEventListener(\"pointerdown\", this.onBlockLabelPointerDown);\n        }\n    }\n\n    removeBlockListeners(block) {\n        block.node.removeEventListener(\"click\", this.onBlockButtonClick);\n\n        block.node.removeEventListener(\"pointerdown\", this.onBlockRangePointerDown);\n        block.node.removeEventListener(\"pointermove\", this.onBlockRangePointerMove);\n\n        if (block.mode === \"grid\") {\n            block.node.removeEventListener(\"click\", this.onBlockLabelClick);\n            block.node.removeEventListener(\"pointerover\", this.onBlockLabelPointerOverOut);\n            block.node.removeEventListener(\"pointerout\", this.onBlockLabelPointerOverOut);\n            block.node.removeEventListener(\"pointerdown\", this.onBlockLabelPointerDown);\n        }\n    }\n\n    /**\n     * @param {PointerEvent} event\n     */\n    onBlockButtonClick(event) {\n        const button = event.target.closest(\".selector-item-button, .selector-grid-gap\");\n        if (!button) return;\n\n        const blockIndex = this.getBlockIndexFromEvent(event);\n\n        if (event.detail % 2 === 0 && this.lastBlockClicked === blockIndex && this.lastButtonClicked === button.dataset.indexWithinBlock) {\n            const block = this.getBlockFromEvent(event);\n            const groupIndex = button.dataset.dblClickGroup;\n            const indices = block.dblClickGroups[groupIndex];\n\n            this.toggleItems(indices);\n        }\n\n        this.lastButtonClicked = button.dataset.indexWithinBlock;\n        this.lastBlockClicked = blockIndex;\n    }\n\n    /**\n     * @param event\n     * @returns {?string}\n     */\n    getBlockIndexFromEvent(event) {\n        const blockNode = event.target.closest(\".selector-block\");\n        return blockNode ? blockNode.dataset.blockIndex : null;\n    }\n\n    /**\n     * @param {PointerEvent} event\n     * @returns {?Object}\n     */\n    getBlockFromEvent(event) {\n        const index = this.getBlockIndexFromEvent(event);\n        return index !== null ? this.blocks[index] : null;\n    }\n\n    /**\n     * @param {PointerEvent} event\n     * @returns {*|null}\n     */\n    getIndicesFromBlockLabelEvent(event) {\n        const element = event.target.closest(\".block-label\");\n        if (!element) return;\n\n        const indicesKey = element.classList.contains(\"block-row-label\") ? \"indicesByRow\" : \"indicesByColumn\";\n        const index = element.dataset.index;\n        const block = this.getBlockFromEvent(event);\n        return block[indicesKey][index];\n    }\n\n    /**\n     * @param {PointerEvent} event\n     */\n    onBlockLabelClick(event) {\n        const indices = this.getIndicesFromBlockLabelEvent(event);\n        if (!indices) return;\n\n        this.toggleItems(indices);\n    }\n\n    /**\n     * @param {PointerEvent} event\n     */\n    onBlockLabelPointerOverOut(event) {\n        const indices = this.getIndicesFromBlockLabelEvent(event);\n        if (!indices) return;\n\n        this.buttonsClassIfElse(event.type === \"pointerover\", indices, \"hover\");\n    }\n\n    /**\n     * @param {PointerEvent} event\n     */\n    onBlockLabelPointerDown(event) {\n        const indices = this.getIndicesFromBlockLabelEvent(event);\n        if (!indices) return;\n\n        this.buttonsAddClass(indices, \"active\");\n        this.blockLabelActiveIndices = indices;\n\n        document.addEventListener(\"pointerup\", this.onBlockLabelPointerUpCancel, {once: true});\n        document.addEventListener(\"pointercancel\", this.onBlockLabelPointerUpCancel, {once: true});\n    }\n\n    onBlockLabelPointerUpCancel() {\n        const indices = this.blockLabelActiveIndices;\n        if (indices) {\n            this.buttonsRemoveClass(indices, \"active\");\n        }\n        this.blockLabelActiveIndices = null;\n        this.removeDocumentLabelListeners();\n    }\n\n    resetRangeSelection() {\n        this.rangeSelectingBlockIndex = null;\n\n        this.buttonsRemoveClass(this.rangeSelectionActiveIndices, \"active\");\n\n        this.rangeSelectionActiveIndices = null;\n        this.rangeSelectStartIndex = null;\n        this.rangeSelectStopIndex = null;\n        this.rangeSelectionActiveIndices = null;\n    }\n\n    /**\n     * @param {PointerEvent} event\n     */\n    onBlockRangePointerMove(event) {\n        if (this.rangeSelectingBlockIndex === null) return;\n        const element = document.elementFromPoint(event.clientX, event.clientY);\n        const button = element.closest(\".selector-item-button, .selector-grid-gap\");\n        if (!button) return;\n\n        const block = button.closest(\".selector-block\");\n        if (block.dataset.blockIndex !== this.rangeSelectingBlockIndex) return;\n\n        const indexWithinBlock = button.dataset.indexWithinBlock;\n        if (this.rangeSelectStopIndex === indexWithinBlock) return;\n\n        this.rangeSelectStartIndex ??= indexWithinBlock;\n        this.rangeSelectStopIndex = indexWithinBlock;\n        this.updateRangeSelection();\n    }\n\n    /**\n     * @param {PointerEvent} event\n     */\n    onBlockRangePointerDown(event) {\n        const blockIndex = this.getBlockIndexFromEvent(event);\n        if (blockIndex === null) return;\n\n        this.rangeSelectingBlockIndex = blockIndex;\n        const button = event.target.closest(\".selector-item-button, .selector-grid-gap\")\n        if (button) {\n            this.rangeSelectStartIndex = button.dataset.indexWithinBlock;\n            this.rangeSelectStopIndex = this.rangeSelectStartIndex;\n            this.updateRangeSelection();\n        }\n\n        document.addEventListener(\"pointerup\", this.onBlockRangePointerUpCancel, {once: true});\n        document.addEventListener(\"pointercancel\", this.onBlockRangePointerUpCancel, {once: true});\n        this.blocks[blockIndex].node.addEventListener(\"pointermove\", this.onBlockRangePointerMove);\n    }\n\n    onBlockRangePointerUpCancel(event) {\n        if (this.rangeSelectingBlockIndex === null) return;\n\n        if (\n            event.type === \"pointerup\" &&\n            this.getBlockIndexFromEvent(event) === this.rangeSelectingBlockIndex &&\n            this.rangeSelectionActiveIndices\n        ) {\n            this.toggleItems(this.rangeSelectionActiveIndices);\n        }\n\n        this.blocks[this.rangeSelectingBlockIndex].node.removeEventListener(\"pointermove\", this.onBlockRangePointerMove);\n        this.removeDocumentRangeListeners();\n        this.resetRangeSelection();\n    }\n\n    removeDocumentLabelListeners() {\n        document.removeEventListener(\"pointerup\", this.onBlockLabelPointerUpCancel);\n        document.removeEventListener(\"pointercancel\", this.onBlockLabelPointerUpCancel);\n    }\n\n    removeDocumentRangeListeners() {\n        document.removeEventListener(\"pointerup\", this.onBlockRangePointerUpCancel);\n        document.removeEventListener(\"pointercancel\", this.onBlockRangePointerUpCancel);\n    }\n\n    updateRangeSelection() {\n        if (this.rangeSelectionActiveIndices) {\n            this.buttonsRemoveClass(this.rangeSelectionActiveIndices, \"active\");\n        }\n        this.rangeSelectionActiveIndices = this.getIndicesInRangeSelection();\n        this.buttonsAddClass(this.rangeSelectionActiveIndices, \"active\");\n    }\n\n    getIndicesInRangeSelection() {\n        if (this.rangeSelectStartIndex === null || this.rangeSelectStopIndex === null) {\n            return [];\n        }\n\n        const [startIndex, stopIndex] = minmax(this.rangeSelectStartIndex, this.rangeSelectStopIndex);\n        const block = this.blocks[this.rangeSelectingBlockIndex];\n\n        if (block.mode === \"grid\") {\n            block.rangeSelectionMode ??= \"grid\";\n            if (block.rangeSelectionMode === \"grid\") {\n                let [startRow, startColumn] = divrem(startIndex, block.nColumns);\n                let [stopRow, stopColumn] = divrem(stopIndex, block.nColumns);\n\n                [startRow, stopRow] = minmax(startRow, stopRow);\n                [startColumn, stopColumn] = minmax(startColumn, stopColumn);\n\n                return range(startRow, stopRow + 1)\n                    .map(index => range(\n                        index * block.nColumns + startColumn, index * block.nColumns + stopColumn + 1\n                    ))\n                    .flat().map(index => block.indices[index]);\n            } else if (block.rangeSelectionMode === \"walkColumns\") {\n                let transposedStartIndex = this.transposeIndex(startIndex, block.nRows, block.nColumns);\n                let transposedStopIndex = this.transposeIndex(stopIndex, block.nRows, block.nColumns);\n\n                [transposedStartIndex, transposedStopIndex] = minmax(transposedStartIndex, transposedStopIndex);\n\n                const transposedRange = this.transposedRange(block.nColumns, block.nRows)\n                return range(transposedStartIndex, transposedStopIndex + 1).map(\n                    index => transposedRange[index]\n                ).map(index => block.indices[index]);\n            } else if (block.rangeSelectionMode !== \"walkRows\") {\n                console.error(\"Invalid range selection mode, use grid, walkRows or walkColumns.\");\n            }\n        }\n\n        return range(startIndex, stopIndex + 1).map(index => block.indices[index]);\n    }\n\n    standardizeBlockIndices(block) {\n        if (block.mode === \"grid\") {\n            if (!block.nColumns) {\n                throw new Error(\"Block columns not set.\");\n            }\n\n            block.nRows = Math.ceil(block.indices.length / block.nColumns);\n            const residue = block.indices.length % block.nColumns;\n            if (residue !== 0) {\n                const n = block.nColumns - residue;\n                block.indices.push(...(new Array(n).fill(null)));\n            }\n            if (block.transpose) {\n                this.transposeBlock(block);\n            }\n        }\n    }\n\n    transposeBlock(block) {\n        block.indices = this.transposeIndices(block.indices, block.nRows, block.nColumns);\n    }\n\n    transposeIndices(indices, n, m) {\n        if (indices.length !== n * m) {\n            throw new Error(\"Dimensions don't match.\");\n        }\n        return this.transposedRange(n, m).map(i => indices[i]);\n    }\n\n    transposedRange(n, m) {\n        return range(n * m).map(index => this.transposeIndex(index, n, m));\n    }\n\n    transposeIndex(index, n, m) {\n        const [i, j] = divrem(index, m);\n        return j * n + i;\n    }\n\n    /**\n     * @param {any[]} subsets\n     * @param {number} n\n     * @param {boolean} [allowGaps]\n     * @returns {number[][]}\n     */\n    processIndexSubsets(subsets, n, allowGaps = false) {\n        const result = [];\n        const covered = new Array(n).fill(false);\n        for (const [i, subset] of subsets.entries()) {\n            if (subset === \"rest\") {\n                if (i !== subsets.length - 1) {\n                    console.error(\"Can only have subset 'rest' at the end.\");\n                }\n                result.push(ArrayHelper.filterIndices(covered, x => !x));\n                break;\n            }\n            const indices = [];\n\n            for (const index of this.processIndices(subset, allowGaps)) {\n                indices.push(index);\n\n                if (index === null) {\n                    continue;\n                }\n                if (covered[index]) {\n                    throw new Error(`Duplicate subset index ${index}.`);\n                }\n                covered[index] = true;\n            }\n            result.push(indices);\n        }\n\n        const uncovered = ArrayHelper.filterIndices(subsets, x => !x);\n        if (uncovered.length !== 0) {\n            throw new Error(`Not all indices were covered: missing ${uncovered}.`);\n        }\n\n        return result;\n    }\n\n    updateButtons(scale = true) {\n        const forms = this.activeForms();\n        for (const [index, item] of this.items.entries()) {\n            if (item.countQuizItems(forms) === 0) {\n                this.updateButtonForms(index, this.formsData.keys);\n                this.buttons[index].classList.add('disabled');\n            } else {\n                this.updateButtonForms(index, forms);\n                this.buttons[index].classList.remove('disabled');\n            }\n        }\n        if (scale) {\n            this.scaleButtons();\n        }\n    }\n\n    /**\n     * @param {number} index\n     * @param {string[]} forms\n     */\n    updateButtonForms(index, forms) {\n        const formsString = this.items[index].getFormsDisplayString(forms)\n        this.buttons[index].querySelector(\".symbol\").replaceChildren(formsString);\n    }\n\n    /**\n     * @param {(number | null)[]} indices\n     * @param {boolean} [updateIfDisabled]\n     */\n    toggleItems(indices, {updateIfDisabled = false} = {}) {\n        indices = indices.filter(index => index !== null);\n        const checked = indices.map(index => this.itemsActive[index]).includes(false);\n        for (const index of indices) {\n            this.updateItem(index, checked, {\n                updateIfDisabled: updateIfDisabled,\n                callUpdateListeners: false\n            });\n        }\n\n        this.updateListeners.call(this);\n    }\n\n    /**\n     * @param {number|string} index\n     * @param {boolean} checked\n     * @param {boolean} [updateInput]\n     * @param {boolean} [updateIfDisabled]\n     * @param {boolean} [callUpdateListeners]\n     */\n    updateItem(index, checked, {updateIfDisabled = false, callUpdateListeners = true} = {}) {\n        this.itemsActive[index] = checked;\n        if (!this.buttons[index].classList.contains('disabled') || updateIfDisabled) {\n            this.buttons[index].setAttribute('aria-checked', checked.toString());\n        }\n\n        if (callUpdateListeners) {\n            this.updateListeners.call(this);\n        }\n    }\n\n    /**\n     * @returns {number}\n     */\n    activeQuizItemCount() {\n        const forms = this.activeForms();\n        let count = 0;\n        for (const [index, item] of this.items.entries()) {\n            if (this.itemsActive[index]) {\n                count += item.countQuizItems(forms);\n            }\n        }\n\n        return count;\n    }\n\n    scaleButtons() {\n        for (const block of this.blocks) {\n            const buttons = block.indices\n                .filter(index => index !== null)\n                .map(index => this.buttons[index])\n                .filter(button => !button.classList.contains('disabled'));\n\n            DOMHelper.scaleAllToFit(\n                buttons.map(button => button.querySelector(\".symbol\")),\n                {containers: buttons, uniform: 0.75}\n            );\n\n            if (this.selectorData.label) {\n                DOMHelper.scaleAllToFit(\n                    buttons.map(button => button.querySelector(\".selector-item-label\")),\n                    {containers: buttons, uniform: 0.75}\n                );\n            }\n        }\n    }\n\n    /**\n     * @param {boolean[]} itemsActive\n     * @returns {boolean[]}\n     */\n    processItemsActive(itemsActive) {\n        if (!itemsActive || !Array.isArray(itemsActive) || itemsActive.length !== this.items.length) {\n            if (itemsActive) {\n                console.error(\"Invalid active items array. Must be boolean array of same length as items.\");\n            }\n            return this.defaultItemsActive();\n        }\n\n        return itemsActive.map(x => {\n            if (![true, false, 0, 1].includes(x)) {\n                console.warn(\"Invalid itemsActive, should be array of booleans or 0s and 1s.\");\n            }\n            return !!x;\n        });\n    }\n\n    /**\n     * @param {boolean[]} itemsActive\n     */\n    setActive(itemsActive) {\n        if (!Array.isArray(itemsActive) || itemsActive.length !== this.items.length) {\n            console.error(\"Invalid active items.\");\n            return;\n        }\n        for (const [index, active] of itemsActive.entries()) {\n            this.updateItem(index, active, {callUpdateListeners: false});\n        }\n        this.itemsActive = itemsActive;\n    }\n\n    defaultItemsActive() {\n        let val = this.selectorData.defaultActive ?? \"all\";\n        if (val === \"all\" || val === \"none\") {\n            return new Array(this.items.length).fill(val === \"all\");\n        }\n\n        const itemsActive = new Array(this.items.length).fill(false);\n        if (val.substring(0,5) === \"block\") {\n            try {\n                const blockIndices = this.processIndices(val.substring(5));\n                val = blockIndices.map(index => this.blocks[index].indices).flat();\n            } catch (e) {\n                console.error(e);\n                return itemsActive;\n            }\n        }\n\n        if (!Array.isArray(val)) {\n            console.error(\"Invalid defaultActive.\");\n            return itemsActive;\n        }\n\n        for (const index of val) {\n            itemsActive[index] = true;\n        }\n        return itemsActive;\n    }\n\n    /**\n     * @param {DatasetItem} item\n     * @param {number} index\n     * @returns {HTMLElement}\n     */\n    getItemButton(item, index) {\n        const button = DOMHelper.createElement(\"div.selector-item-button\");\n        const id = DOMHelper.uniqueIdPrefix(\"selectorButton\") + index.toString();\n        DOMHelper.setAttrs(button, {\n            id: id,\n            role: \"checkbox\",\n            tabindex: \"0\",\n            \"aria-checked\": \"false\",\n            \"aria-labelledby\": id          // setting aria-labelledby to its own content\n        });\n\n        const symbolElement = DOMHelper.createElement(\"span.symbol.symbol-string\");\n\n        FontHelper.setFont(symbolElement, this.dataset.getFont(this.selectorData.font));\n\n        DOMHelper.setAttrs(symbolElement, {\n            lang: this.dataset.metadata.lang,\n            dir: this.dataset.metadata.dir\n        });\n\n        button.append(symbolElement);\n\n        if (this.selectorData.label) {\n            const label = DOMHelper.createElement(\"span.selector-item-label\");\n            const labelData = this.selectorData.label;\n            let labelContent = item.properties[labelData.property];\n            if (labelData.splitFirst ?? true) {\n                const splitter = labelData.splitter ?? \"[,;/]\";\n                labelContent = labelContent.split(new RegExp(`\\s*(${splitter})\\s*`))[0];\n            }\n\n            label.textContent = labelContent;\n            button.append(label);\n        }\n\n        button.dataset.index = index.toString();\n\n        return button;\n    }\n\n    setupFormsSetting(checked = null) {\n        if (!(this.formsData.showSetting ?? Object.keys(this.formsData.setting).length > 1)) {\n            return;\n        }\n\n        const label = this.formsData.label ?? (this.formsData.exclusive ? \"Form\" : \"Forms\");\n        this.formsSetting = ButtonGroup.from(\n            ObjectHelper.map(this.formsData.setting, (p) => p.label),\n            {\n                label: label,\n                exclusive: !!this.formsData.exclusive,\n                checked: checked ?? ObjectHelper.map(this.formsData.setting, (p) => p.active),\n            },\n        );\n\n        this.formsSetting.updateListeners.push(\n            this.updateButtons.bind(this),\n            () => this.updateListeners.call(this)\n        );\n\n        this.node.prepend(this.formsSetting.node);\n    }\n\n    destroy() {\n        for (const block of this.blocks) {\n            this.removeBlockListeners(block);\n        }\n        this.removeDocumentRangeListeners();\n        this.removeDocumentLabelListeners();\n        this.node.remove();\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    activeForms() {\n        if (!this.formsSetting) {\n            return Object.keys(this.formsData.setting);\n        }\n\n        const result = [];\n\n        let keys = this.formsSetting.value;\n        if (this.formsSetting.exclusive) {\n            keys = [keys];\n        }\n\n        for (const key of keys) {\n            if (\"keys\" in this.formsData.setting[key]) {\n                result.push(...this.formsData.setting[key].keys);\n            } else {\n                result.push(key);\n            }\n        }\n        return result;\n    }\n\n    activeIndices() {\n        return ArrayHelper.filterIndices(this.itemsActive, x => x);\n    }\n\n    /**\n     * @param {number | number[] | string} indices\n     * @param {boolean} [allowGaps]\n     * @returns {(number|null)[]}\n     */\n    processIndices(indices, allowGaps = false) {\n        if (typeof indices === \"string\") {\n            return this.parseRanges(indices, allowGaps);\n        }\n        if (typeof indices === \"number\") {\n            return [indices];\n        }\n\n        if (!Array.isArray(indices)) {\n            throw new Error(\"Invalid indices datatype: need string, number or Array<number>.\")\n        }\n\n        indices = indices.sort();\n        const l = indices.length;\n        indices = indices.filter((v, i, a) => i === 0 || v !== a[i - 1]);\n        if (indices.length !== l) {\n            console.warn(\"Indices contain duplicates.\");\n        }\n\n        return indices;\n    }\n\n    /**\n     * @param {string} str\n     * @param {boolean} [allowGaps]\n     * @returns {(number|null)[]}\n     */\n    parseRanges(str, allowGaps = false) {\n        return [].concat(...str.split(\",\").map(range => {\n            if (allowGaps && range.substring(0, 3) === \"gap\") {\n                const n = range.length === 3 ? 1 : this.parseInt(range.substring(3));\n                return new Array(n).fill(null);\n            }\n            return this.parseRange(range);\n        }));\n    }\n\n    /**\n     * @param {string} str\n     * @returns {number[]}\n     */\n    parseRange(str) {\n        const vals = str.split(\":\").map(x => this.parseInt(x));\n        if (vals.length === 1) {\n            return vals;\n        }\n\n        if (vals.length === 0 || vals.length > 3) {\n            throw new Error(\"Invalid range, 2-3 numbers.\");\n        }\n\n        const start = vals[0];\n        const stop = vals[vals.length - 1];\n        const step = vals.length === 3 ? vals[1] : 1;\n\n        if (stop < start || step < 1) {\n            throw new Error(\"Invalid range, must have start <= stop and step >= 1.\");\n        }\n\n        return range(start, stop + 1, step);\n    }\n\n    /**\n     * Parse int, throws Error if the value is NaN.\n     * @param {string} str\n     * @returns {number}\n     */\n    parseInt(str) {\n        const result = parseInt(str);\n        if (isNaN(result)) {\n            throw new Error(\"Not a number.\");\n        }\n        return result;\n    }\n}\n\n/**\n * @param {number} a\n * @param {number} b\n * @returns {[number, number]}\n */\nfunction divrem(a, b) {\n    const rem = a % b;\n    const div = Math.round((a - rem) / b);\n    return [div, rem];\n}\n\n/**\n * @param {number} a\n * @param {number} b\n * @returns {[number, number]}\n */\nfunction minmax(a, b) {\n    return [Math.min(a, b), Math.max(a, b)];\n}", "import {ItemProperty, QuizItem} from \"./symbol.js\";\nimport {DOMHelper, ObjectHelper, FontHelper} from '../helpers/helpers.js';\nimport ItemSelector from \"./selector.js\";\nimport {SettingsCollection, ButtonGroup, ValueElement} from \"../settings/settings.js\";\n\nDOMHelper.registerTemplate(\n    \"headingElement\",\n    `<div class=\"heading-element\"><span class=\"heading-element-number\"></span><span class=\"heading-element-symbol\"></span></div>`\n);\n\nexport const DATASETS_METADATA = {\n    arabic: {name: \"Arabic\", file: \"./json/datasets/arabic.json\"},\n    elements: {name: \"Atomic Elements\", file: \"./json/datasets/elements.json\"},\n    cyrillic: {name: \"Cyrillic\", file: \"./json/datasets/cyrillic.json\"},\n    elder_futhark: {name: \"Elder Futhark\", file: \"./json/datasets/elder_futhark.json\"},\n    greek: {name: \"Greek\", file: \"./json/datasets/greek.json\"},\n    hebrew: {name: \"Hebrew\", file: \"./json/datasets/hebrew.json\"},\n    japanese: {name: \"Japanese Kana\", file: \"./json/datasets/japanese.json\"},\n    phoenician: {name: \"Phoenician\", file: \"./json/datasets/phoenician.json\"}\n}\nexport const DEFAULT_DATASET = \"elder_futhark\";\n\nconst DEFAULT_METADATA = {\n    gameHeading: \"Kadmos\",\n    terms: {symbol: \"symbol\", symbols: \"symbols\"},\n    lang: \"en\",\n    dir: \"ltr\"\n};\n\nconst DEFAULT_FORMSDATA = {\n    keys: [\"default\"],\n    setting: {default: {label: \"Default\", \"active\": true}},\n    defaultForm: \"default\",\n    singleForm: true\n};\n\nconst DEFAULT_LANGUAGEDATA = {\n    languages: [\"en\"],\n    default: \"en\"\n}\n\nconst LANGUAGES = {\n    en: \"English\",\n    de: \"German\"\n}\n\nexport class Dataset {\n    static _cache = {};\n\n    constructor(data) {\n        this.name = data.name;\n        this.metadata = Object.assign({}, DEFAULT_METADATA, data.metadata);\n        this.fonts = data.fonts;\n        this.setupFonts();\n        this.displayData = data.displayData ?? {};\n        this.displayData.type ??= \"string\";\n        this.formsData = data.formsData ?? DEFAULT_FORMSDATA;\n        this.propsData = data.propsData;\n        this.selectorData = data.selectorData ?? {};\n        this.variantsData = this.processVariants(data.variantsData)\n\n        this.languageData = data.languageData ?? DEFAULT_LANGUAGEDATA;\n        this.languageData.default ??= this.languageData.languages[0];\n\n        this.items = this.processItems(data.symbolsData);\n    }\n\n    /**\n     *\n     * @param {string} key\n     * @returns {?Promise<Dataset>}\n     */\n    static fromKey(key) {\n        if (!(key in DATASETS_METADATA)) {\n            console.error(`Invalid dataset key \"${key}\".`);\n            return null;\n        }\n\n        if (key in this._cache) {\n            return new Promise((resolve) => resolve(this._cache[key]));\n        }\n\n        return fetch(DATASETS_METADATA[key].file)\n            .then(response => response.json())\n            .then(data => {\n                const dataset = new this(data);\n                this._cache[key] = dataset;\n                return dataset;\n            })\n            .catch(DOMHelper.printError);\n    }\n\n    processVariants(variantsData) {\n        if (!variantsData) {\n            return null;\n        }\n\n        for (const [key, data] of Object.entries(variantsData.variants)) {\n            if (typeof data === \"string\") {\n                variantsData.variants[key] = {label: data};\n            }\n        }\n\n        return variantsData;\n    }\n\n    getGameSettings(checked) {\n        const settings = {};\n        if (this.hasPropsSetting()) {\n            settings.properties = this.propertySetting(checked.properties);\n        }\n        if (this.hasLanguageSetting()) {\n            settings.language = this.languageSetting(checked.language);\n        }\n        return SettingsCollection.createFrom(settings);\n    }\n\n    getFilterSettings(checked) {\n        const settings = {};\n        if (this.hasFormsSetting()) {\n            settings.forms = this.formsSetting(checked.forms);\n        }\n        if (this.hasVariantSetting()) {\n            settings.variant = this.variantSetting(checked.variant);\n        }\n    }\n\n    getSettings(checkedProperties, checkedLanguage) {\n        return SettingsCollection.createFrom({\n            properties: this.propertySetting(checkedProperties),\n            language: this.languageSetting(checkedLanguage)\n        });\n    }\n\n    propertySetting(checked = null) {\n        return ButtonGroup.from(\n            ObjectHelper.map(this.propsData, p => p.label),\n            {\n                label: \"Properties\",\n                checked: checked ?? ObjectHelper.map(this.propsData, p => !!p.active)\n            }\n        );\n    }\n\n    languageSetting(checked = null) {\n        return ButtonGroup.from(\n            ObjectHelper.onlyKeys(LANGUAGES, this.languageData.languages),\n            {\n                label: \"Language\",\n                checked: checked ?? this.languageData.default,\n                exclusive: true\n            }\n        );\n    }\n\n    formsSetting(checked = null) {\n        const label = this.formsData.label ?? (this.formsData.exclusive ? \"Form\" : \"Forms\");\n        return ButtonGroup.from(\n            ObjectHelper.map(this.formsData.setting, (p) => p.label),\n            {\n                label: label,\n                exclusive: !!this.formsData.exclusive,\n                checked: checked ?? ObjectHelper.map(this.formsData.setting, (p) => p.active),\n            },\n        );\n    }\n\n    variantSetting(selected = null) {\n        const variants = this.variantsData.variants;\n        return ValueElement.createSelect(\n            ObjectHelper.map(variants, (variant) => variant.label),\n            {\n                label: \"Variants\",\n                selected: selected ?? this.variantsData.default ?? Object.keys(variants)[0],\n                groups: variants.groups ?? []\n            }\n        )\n    }\n\n    hasPropsSetting() {\n        return this.propsData.keys.length > 1;\n    }\n\n    hasLanguageSetting() {\n        return this.languageData.languages.length > 1;\n    }\n\n    hasVariantSetting() {\n        return !!this.variantsData;\n    }\n\n    hasFormsSetting() {\n        return Object.keys(this.formsData.setting).length > 1;\n    }\n\n    hasFontSetting() {\n        return Object.keys(this.fonts).length > 1;\n    }\n\n    getItemSelector() {\n        return new ItemSelector(this.items, this);\n    }\n\n    _getFont(font) {\n        if (!font) {\n            return this.defaultFont();\n        }\n        if (typeof font === \"string\") {\n            if (font in this.fonts) {\n                return this.fonts[font];\n            } else {\n                console.warn(`Unknown font key \"${font}\".`);\n                return this.defaultFont();\n            }\n        }\n\n        if (font.key || !font.family) {\n            const baseFont = font.key ? this.fonts[font.key] : this.defaultFont();\n            return Object.assign({}, baseFont, ObjectHelper.withoutKeys(font, [\"key\"]));\n        }\n\n        return font;\n    }\n\n    getFont(font) {\n        return ObjectHelper.withoutKeys(this._getFont(font), [\"default\", \"label\"]);\n    }\n\n    setupFonts() {\n        for (const [key, font] of Object.entries(this.fonts)) {\n            if (font.default) {\n                this._defaultFont = key;\n                return;\n            }\n        }\n        this._defaultFont = Object.keys(this.fonts)[0];\n    }\n\n    defaultFont() {\n        return this.fonts[this._defaultFont];\n    }\n\n    /**\n     * @param checked\n     * @returns {ButtonGroup}\n     */\n    fontSetting(checked = null) {\n        const setting = ButtonGroup.from(\n            ObjectHelper.map(this.fonts, font => font.label ?? font.family),\n            {\n                label: \"Font\",\n                exclusive: true,\n                checked: checked ?? this._defaultFont\n            }\n        );\n        setting.node.classList.add(\"font-family-setting\");\n        return setting;\n    }\n\n    /**\n     * @param symbolsData\n     * @returns {DatasetItem[]}\n     */\n    processItems(symbolsData) {\n        const rows = symbolsData.rows;\n\n        if (!Array.isArray(rows)) {\n            throw new Error(\"symbol rows must be an array.\");\n        }\n\n        if (symbolsData.template) {\n            this.applyTemplateToRows(rows, symbolsData.template);\n        }\n\n        const items = new Array(rows.length);\n        let item;\n        for (const [index, itemData] of rows.entries()) {\n            try {\n                item = this.processItem(itemData);\n            } catch (e) {\n                console.warn(\"Error occured processing item with key\", key);\n                console.error(e);\n                continue;\n            }\n            items[index] = item;\n        }\n\n        return items;\n    }\n\n    /**\n     * @param {Array} rows\n     * @param {string[]} template\n     */\n    applyTemplateToRows(rows, template) {\n        for (const [i, item] of rows.entries()) {\n            if (!Array.isArray(item)) {\n                continue;\n            }\n\n            const row = {};\n            for (const [index, value] of item.entries()) {\n                row[template[index]] = value;\n            }\n            rows[i] = row;\n        }\n        return rows;\n    }\n\n    processItem(itemData) {\n        return new DatasetItem(\n            this.processDisplayForms(itemData.display),\n            this.processItemProperties(itemData)\n        );\n    }\n\n    processItemProperties(itemData) {\n        const properties = {};\n        for (const [taggedKey, value] of Object.entries(itemData)) {\n            if (taggedKey.includes(\":\")) {\n                const splitKey = taggedKey.split(\":\");\n                if (splitKey.length !== 2) {\n                    console.warn(\"Ignored invalid symbol key.\");\n                    continue;\n                }\n                const [tag, key] = splitKey;\n\n                if (tag === \"p\") {\n                    properties[key] = value;\n                } else {\n                    console.warn(\"Ignored invalid tagged symbol key.\");\n                }\n            }\n        }\n        return properties;\n    }\n\n    /**\n     * @param {string|string[]|Record<string,string>} display\n     * @returns {Record<string,string>}\n     */\n    processDisplayForms(display) {\n        if (this.formsData.singleForm) {\n            return Object.fromEntries([[this.formsData.defaultForm, display]]);\n        }\n\n        if (typeof display === \"string\") {\n            display = display.split(\"\");\n        }\n\n        if (Array.isArray(display)) {\n            const forms = {};\n            for (const [index, value] of display.entries()) {\n                if (value) {\n                    forms[this.formsData.keys[index]] = value;\n                }\n            }\n            return forms;\n        }\n\n        if (typeof display !== \"object\") {\n            throw new Error(\"Invalid display format: need array or object.\");\n        }\n\n        const invalidKeys = Object.keys(display).filter(key => !this.formsData.keys.includes(key))\n        if (invalidKeys.length > 0) {\n            throw new Error(`Invalid display Form key \"${invalidKeys[0]}\".`);\n        }\n\n        return display;\n    }\n\n    /**\n     * @param {number[]} itemIndices\n     * @param {string[]} forms\n     * @param {string[]} properties default \"default\"\n     * @param {string} [language]\n     * @returns {QuizItem[]}\n     */\n    getQuizItems(itemIndices, forms, properties, language = \"default\") {\n        const items = [];\n\n        for (const key of itemIndices) {\n            const displayStrings = this.items[key].getDisplayString(forms);\n            const itemProperties = this.items[key].getItemProperties(properties, this.propsData, language);\n            items.push(...Object.entries(displayStrings).map(([form, string]) => new QuizItem(string, itemProperties, form)));\n        }\n\n        return items;\n    }\n\n\n    referencePropsData() {\n        const propsData = Object.assign({}, this.propsData);\n        for (const [property, propData] of Object.entries(propsData)) {\n            if (\"referenceMaxDist\" in propData) {\n                const newPropData = Object.assign({}, propData);\n                newPropData.maxDist = propData.referenceMaxDist;\n                propsData[property] = newPropData;\n            }\n        }\n\n        return propsData;\n    }\n\n\n    /**\n     * @param {string[]} properties\n     * @param {string} [language] default \"default\"\n     * @returns {Record<string,QuizItem[]>}\n     */\n    getReferenceItems(properties, language = \"default\") {\n        let items;\n        const propsData = this.referencePropsData();\n\n        if (this.formsData.exclusive) {\n            const itemsProperties = this.items.map(\n                item => item.getItemProperties(properties, propsData, language)\n            );\n\n            const result = {};\n            for (const form of this.formsData.keys) {\n                result[form] = this.items.map((item, index) => new QuizItem(\n                    item.getFormsDisplayString([form]), itemsProperties[index], form\n                ));\n            }\n            return result;\n        } else {\n            items = this.items.map(item => new QuizItem(\n                item.getFormsDisplayString(this.formsData.keys),\n                item.getItemProperties(properties, propsData, language),\n                \"all\"\n            ));\n            return Object.fromEntries(this.formsData.keys.map(form => [form, items]));\n        }\n    }\n\n    /**\n     * @param {HTMLElement} element\n     */\n    setupGameHeading(element) {\n        try {\n            const gameHeading = this.metadata.gameHeading;\n\n            if (\"font\" in gameHeading) {\n                FontHelper.setFont(element, this.getFont(gameHeading.font));\n            } else {\n                FontHelper.clearFont(element);\n            }\n\n            if (this.name === \"Atomic Elements\") {\n                const container = document.createElement(\"div\");\n                container.classList.add(\"element-heading-container\");\n                const els = [];\n                for (const [no, symbol] of [[19, \"K\"], [85, \"At\"], [42, \"Mo\"], [16, \"S\"]]) {\n                    const el = DOMHelper.getTemplate(\"headingElement\");\n                    el.querySelector(\".heading-element-symbol\").textContent = symbol;\n                    el.querySelector(\".heading-element-number\").textContent = no;\n                    els.push(el);\n                }\n                container.replaceChildren(...els);\n                element.replaceChildren(container);\n            } else {\n                element.replaceChildren(gameHeading.string);\n            }\n\n            element.setAttribute(\"lang\", gameHeading.lang ?? this.metadata.lang);\n            element.setAttribute(\"dir\", gameHeading.dir ?? this.metadata.dir);\n        }\n        catch (error) {\n            console.error(error);\n            element.replaceChildren(\"Kadmos\");\n            element.removeAttribute(\"lang\");\n            element.removeAttribute(\"dir\");\n        }\n    }\n}\n\n\nclass DatasetItem {\n    /**\n     * @param {Record<string,string>} displayForms\n     * @param {Record<string,*>} properties\n     */\n    constructor(displayForms, properties) {\n        this.displayForms = displayForms;\n        this.properties = properties;\n    }\n\n    /**\n     * @param forms\n     * @returns {Record<string,string>}\n     */\n    getDisplayString(forms) {\n        return ObjectHelper.onlyKeys(this.displayForms, forms);\n    }\n\n    /**\n     * @param {string[]} propertyKeys\n     * @param {Record<string,*>} propsData\n     * @param {string} [language]\n     * @returns {Object<string,ItemProperty>}\n     */\n    getItemProperties(propertyKeys, propsData, language = \"default\") {\n        const result = {};\n        for (const key of propertyKeys) {\n            if (!(key in this.properties)) {\n                console.error(`Missing property key \"${key}\".`);\n                continue;\n            }\n\n            result[key] = this.properties[key];\n        }\n\n        if (language !== \"default\") {\n            for (const key of propertyKeys) {\n                const langKey = key + \"_\" + language;\n                if (this.properties[langKey]) {\n                    result[key] = this.properties[langKey];\n                }\n            }\n        }\n\n        return ObjectHelper.map(result, (prop, key) => ItemProperty.fromData(prop, propsData[key]));\n    }\n\n    /**\n     * @param {string[]} forms\n     * @returns {string}\n     */\n    getFormsDisplayString(forms) {\n        return Object.values(this.getDisplayString(forms)).join(\"\");\n    }\n\n    /**\n     * Counts the number of QuizItems this DatasetItem supplies, i.e. the number of form keys that are set\n     * for this item.\n     * @param forms\n     */\n    countQuizItems(forms) {\n        return forms.reduce((acc, form) => form in this.displayForms ? acc + 1 : acc, 0);\n    }\n}\n", "import {SettingsCollection, ValueElement} from \"./settings/settings.js\";\nimport {Game} from \"./game/Game.js\";\nimport {Dataset, DEFAULT_DATASET, DATASETS_METADATA} from \"./dataset/Dataset.js\";\nimport {DOMHelper, Base64Helper, ObjectHelper} from \"./helpers/helpers.js\";\n\n\nexport class GameContext {\n    constructor() {\n        /** @type {?Game} */\n        this.game = null;\n\n        /** @type {?string} */\n        this.datasetKey = null;\n\n        /** @type {?Dataset} */\n        this.dataset = null;\n        /**\n         * @type {?SettingsCollection}\n         */\n        this.sc = null;\n\n        this.genericSettings = this.constructor.generateGenericSettings();\n\n        /**\n         * @type {?ItemSelector}\n         */\n        this.itemSelector = null;\n\n        this.checkPagesNextButton = this.checkPagesNextButton.bind(this);\n        this.saveSettings = this.saveSettings.bind(this);\n        this.readFromSearchParams = this.readFromSearchParams.bind(this);\n        this.startGame = this.startGame.bind(this);\n    }\n\n    static generateGenericSettings() {\n        return SettingsCollection.createFrom({\n            seed: ValueElement.createInput(\"text\", \"Seed (optional)\", {id: \"game-seed\"})\n        });\n    }\n\n    /**\n     * @returns {Record<string,any>}\n     */\n    getCachedSettings() {\n        const settingsJSON = window.localStorage.getItem(this.localStorageSettingsKey());\n        if (!settingsJSON) return {};\n\n        try {\n            const settings = JSON.parse(settingsJSON);\n            if (typeof settings.items === \"string\") {\n                settings.items = Base64Helper.decodeBase64BoolArray(settings.items);\n            }\n            return settings;\n        } catch (e) {\n            console.error(e);\n            return {};\n        }\n    }\n\n    setup() {\n        this.setupDatasetSelect();\n        this.readFromSearchParams();\n        this.setupButtonListeners();\n\n        window.addEventListener(\"popstate\", this.readFromSearchParams);\n        window.addEventListener(\"resize\", () => {\n            if (this.itemSelector) {\n                this.itemSelector.scaleButtons();\n            }\n        });\n    }\n\n    setupButtonListeners() {\n        document.getElementById(\"start-game-button\").addEventListener(\"click\", this.startGame);\n        document.getElementById(\"stop-game-button\").addEventListener(\"click\", () => {\n            this.game.finish();\n        });\n        document.getElementById(\"item-submit-button\").addEventListener(\"click\", () => {\n            this.game.submitRound();\n        });\n        document.getElementById(\"item-next-button\").addEventListener(\"click\", () => {\n            this.game.newRound();\n        });\n    }\n\n    setupDatasetSelect() {\n        const select = document.getElementById(\"datasetSelect\");\n        DOMHelper.setOptions(\n            select, ObjectHelper.map(DATASETS_METADATA, data => data.name)\n        );\n\n        select.addEventListener(\"change\", (e) => {\n            const key = e.target.value;\n            Dataset.fromKey(key).then(dataset => {\n                this.selectDataset(key, dataset);\n            }).catch(console.error);\n        });\n    }\n\n    /**\n     * @param key\n     * @param {Dataset} dataset\n     */\n    selectDataset(key, dataset) {\n        this.dataset = dataset;\n        this.datasetKey = key;\n        DOMHelper.setSearchParams({dataset: key});\n\n        const cachedSettings = this.getCachedSettings();\n\n        this.setupSelector(cachedSettings);\n        this.setupSettingsCollection(cachedSettings);\n\n        const gameHeading = this.dataset.metadata.gameHeading;\n        const fonts = \"font\" in gameHeading && \"family\" in gameHeading.font ? [gameHeading.font.family] : [];\n        DOMHelper.batchUpdate([\n            [\n                this.dataset.setupGameHeading.bind(this.dataset),\n                document.querySelector(\"#game-heading h1\")\n            ],\n            [\n                (e, selector) => {\n                    e.replaceChildren(selector.node);\n                    selector.scaleButtons();\n                },\n                document.getElementById(\"game-filters\"),\n                this.itemSelector\n            ],\n            [\n                (e, ...args) => e.replaceChildren(...args),\n                document.getElementById(\"game-settings\"),\n                ...this.sc.nodeList()\n            ]\n        ], fonts);\n\n        DOMHelper.showPage(document.getElementById('game-filters'));\n    }\n\n    setupSelector(settings) {\n        if (this.itemSelector) {\n            this.itemSelector.destroy();\n        }\n        this.itemSelector = this.dataset.getItemSelector();\n        this.itemSelector.setup(settings.items, settings.forms, this.datasetKey);\n        this.itemSelector.updateListeners.push(\n            this.checkPagesNextButton,\n            this.saveSettings\n        );\n        this.checkPagesNextButton();\n    }\n\n    checkPagesNextButton() {\n        DOMHelper.setAttrs(\n            document.querySelector('.pages-next-button'),\n            {disabled: this.itemSelector.activeQuizItemCount() === 0}\n        );\n    }\n\n    setupSettingsCollection(settings) {\n        this.sc = this.dataset.getSettings(settings.properties, settings.language);\n        this.sc.extend(this.genericSettings);\n\n        for (const key of [\"language\"]) {\n            const singleButton = this.sc.getSetting(key).buttonCount() === 1;\n            if (singleButton) {\n                DOMHelper.hide(this.sc.getNode(key));\n            }\n            DOMHelper.classIfElse(singleButton, this.sc.getNode(key), \"hidden\");\n        }\n\n        this.sc.getSetting(\"properties\").disableIfSingleButton(true);\n\n        this.sc.addUpdateListener(() => {\n            this.saveSettings();\n        });\n    }\n\n    localStorageSettingsKey(datasetKey = this.datasetKey) {\n        return \"settings_\" + datasetKey;\n    }\n\n    saveSettings() {\n        DOMHelper.setSearchParams({dataset: this.datasetKey});\n\n        window.localStorage.setItem(this.localStorageSettingsKey(), JSON.stringify({\n            items: Base64Helper.encodeBase64BoolArray(this.itemSelector.itemsActive),\n            forms: this.itemSelector.activeForms(),\n            properties: this.sc.getValue(\"properties\"),\n            language: this.sc.getValue(\"language\")\n        }));\n    }\n\n    startGame() {\n        if (this.game) {\n            this.game.cleanup();\n        }\n\n        this.saveSettings();\n\n        const properties = this.sc.getValue(\"properties\");\n        const language = this.sc.getValue(\"language\");\n        const items = this.dataset.getQuizItems(\n            this.itemSelector.activeIndices(),\n            this.itemSelector.activeForms(),\n            properties,\n            language\n        );\n        const referenceItems = this.dataset.getReferenceItems(properties, language);\n\n        this.game = new Game(this.dataset, items, properties, language);\n\n        const seed = this.sc.getValue(\"seed\");\n        if (seed) {\n            this.game.seed(seed);\n        }\n\n        this.game.setReferenceItems(referenceItems);\n        this.game.setup();\n        this.game.newRound();\n        this.setPlaying(true);\n        this.game.focus();\n        this.game.onFinish.push(() => {\n            this.setPlaying(false);\n        });\n    }\n\n    /**\n     * @param {boolean} playing\n     */\n    setPlaying(playing) {\n        if (!playing) {\n            DOMHelper.showPage(document.getElementById('game-filters'));\n        }\n        DOMHelper.classIfElse(playing, document.body, \"playing\");\n    }\n\n    readFromSearchParams() {\n        const searchParams = new URLSearchParams(location.search);\n        const datasetKey = searchParams.get(\"dataset\") ?? DEFAULT_DATASET;\n        document.getElementById(\"datasetSelect\").value = datasetKey;\n\n        Dataset.fromKey(datasetKey).then(dataset => {\n            this.selectDataset(datasetKey, dataset);\n\n            if ([\"1\", \"true\"].includes(searchParams.get(\"play\"))) {\n                this.startGame();\n            } else {\n                this.setPlaying(false);\n            }\n        });\n    }\n}\n", "import {DOMHelper} from \"./helpers/helpers.js\";\nimport {GameContext} from \"./context.js\";\n\n// --------------- GAME SETUP -----------------\n(function () {\n    readDarkLightMode();\n\n    const ctx = new GameContext();\n    ctx.setup();\n\n    document.querySelectorAll(\".ribbon\").forEach((element) => {\n        setupRibbon(element, element.classList.contains(\"ribbon-closable\"));\n    });\n\n    document.querySelectorAll(\".pages-container\").forEach((element) => {\n        DOMHelper.setupPages(element);\n    });\n})();\n\n\nfunction readDarkLightMode() {\n    const params = new URLSearchParams(location.search);\n\n    if ([\"1\", \"true\"].includes(params.get(\"darkmode\"))) {\n        document.documentElement.classList.add(\"dark-mode\");\n    } else if ([\"1\", \"true\"].includes(params.get(\"lightmode\"))) {\n        document.documentElement.classList.add(\"light-mode\");\n    }\n}\n\n\n/**\n * @param {HTMLElement} container\n * @param {boolean} [closable]\n */\nfunction setupRibbon(container, closable = false) {\n    const contents = container.querySelector(\".ribbon-contents\");\n    const inputs = container.querySelectorAll(\".ribbon-buttons input[type=checkbox]\");\n    container.dataset.closable = closable.toString();\n\n    let openId = container.dataset.openId;\n    if (!openId) {\n        for (const input of inputs) {\n            if (input.checked) {\n                openId = input.dataset.contentId;\n                break;\n            }\n        }\n    }\n\n    DOMHelper.addClass(contents.querySelectorAll(\".ribbon-content\"), \"hidden\");\n    if (!openId && !(closable && contents.classList.contains(\"hidden\"))) {\n        openId = inputs[0].dataset.contentId;\n        inputs[0].checked = true;\n    }\n\n    if (openId) {\n        document.getElementById(openId).classList.remove(\"hidden\");\n        contents.classList.remove(\"hidden\");\n        container.dataset.openId = openId;\n    }\n\n    container.querySelector('.ribbon-buttons').addEventListener(\"change\", ribbonButtonsChangeListener);\n}\n\n/**\n * @param {Event} event\n */\nfunction ribbonButtonsChangeListener(event) {\n    const input = event.target;\n    const container = input.closest(\".ribbon\");\n    const contents = container.querySelector('.ribbon-contents');\n\n    if (input.checked) {\n        const previousOpenId = container.dataset.openId;\n        if (!contents.classList.contains(\"hidden\") && previousOpenId) {\n            DOMHelper.addClass(document.getElementById(previousOpenId), \"hidden\");\n            container.querySelector(`.ribbon-buttons input[data-content-id=\"${previousOpenId}\"]`).checked = false;\n        }\n\n        document.getElementById(input.dataset.contentId).classList.remove(\"hidden\");\n        container.dataset.openId = input.dataset.contentId;\n\n        contents.classList.remove(\"hidden\");\n    } else if (container.dataset.closable === \"true\") {\n        contents.classList.add(\"hidden\");\n        container.dataset.openId = \"\";\n    } else {\n        input.checked = true;\n    }\n}\n"],
  "mappings": "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",
  "names": ["object_exports", "__export", "extractKeys", "filter", "filterKeys", "map", "mapKeyArrayToValues", "mapKeys", "onlyKeys", "subsetToBoolRecord", "withoutKeys", "array_exports", "__export", "arraysEqual", "avg", "bisectLeft", "cumSums", "filterIndices", "range", "sum", "arr", "value", "val", "lo", "hi", "mid", "cur", "a", "b", "element", "index", "callback", "i", "v", "_", "start", "stop", "step", "n", "map", "obj", "fn", "k", "v", "filter", "filterKeys", "_", "withoutKeys", "object", "keys", "result", "key", "extractKeys", "appendObject", "arr", "onlyKeys", "warnOtherKeys", "keySet", "value", "mapKeys", "callback", "mapKeyArrayToValues", "subsetToBoolRecord", "subset", "arraysEqual", "dom_exports", "__export", "addClass", "appendChildren", "batchUpdate", "button", "classIfElse", "classesToList", "computeScaleToFit", "createElement", "elementSize", "forEachElement", "getTemplate", "hide", "htmlToElement", "htmlToElements", "label", "log", "printError", "registerTemplate", "registerTemplates", "removeClass", "scaleAllToFit", "scaleToFit", "setAttrOnKeys", "setAttrs", "setDefaultId", "setOptions", "setSearchParams", "setupPages", "show", "showPage", "toggleShown", "uniqueIdPrefix", "IdPrefixCounter", "TEMPLATES", "registerTemplates", "htmls", "key", "html", "registerTemplate", "template", "getTemplate", "button", "type", "value", "labelContent", "id", "input", "label", "uniqueIdPrefix", "setAttrs", "element", "content", "defaultId", "setDefaultId", "htmlToElements", "htmlToElement", "elements", "createElement", "str", "tagId", "classes", "tag", "setOptions", "select", "data", "selected", "disabled", "groups", "grouped", "map", "before", "keys", "optgroup", "createOption", "option", "appendChildren", "parent", "children", "child", "setAttrOnKeys", "attr", "attrs", "addClass", "prefix", "connector", "forEachElement", "callback", "classIfElse", "bool", "trueClasses", "falseClasses", "classesToList", "elem", "removeClass", "show", "property", "hideValues", "hide", "toggleShown", "showFirst", "first", "second", "elementSize", "box", "scrollSize", "width", "height", "style", "scale", "computeScaleToFit", "container", "dimension", "elementBox", "containerBox", "grow", "elementWidth", "elementHeight", "containerWidth", "containerHeight", "scaleWidth", "getScale", "scaleHeight", "scaleToFit", "options", "scaleAllToFit", "uniformFactor", "containers", "scales", "index", "newMaxScale", "containerSize", "batchUpdate", "updates", "fonts", "font", "update", "args", "printError", "error", "log", "arg", "setupPages", "showPage", "page", "setSearchParams", "params", "url", "hasChanged", "encodedValue", "cyrb128", "str", "h1", "h2", "h3", "h4", "i", "k", "sfc32", "a", "b", "c", "d", "t", "seededPRNG", "seed", "random_default", "rand", "min", "max", "array", "length", "randomIndex", "weights", "sums", "cumSums", "bisectLeft", "font_exports", "__export", "clearFont", "getFontData", "setFont", "setFontFamily", "setFontProperties", "fonts_default", "FONT_DATA", "fonts_default", "font", "FONT_PROPERTY_KEYS", "FONT_TRANSFORM_PROPERTIES", "setFont", "element", "properties", "clearFont", "family", "setFontFamily", "newProps", "defaultData", "setFontProperties", "getFontData", "transform", "key", "value", "setStylesets", "classIfElse", "onlyKeys", "property", "stylesets", "variantStr", "ssIDsStr", "name", "id", "base64_exports", "__export", "decodeBase64BoolArray", "decodeBase64Number", "encodeBase64BoolArray", "encodeBase64Number", "boolArray", "base64ToString", "boolArrayToBase64", "str", "b64str", "length", "boolArrayFromBase64", "base64FromString", "numberToBase64", "numberFromBase64", "arr", "values", "sum", "charIndex", "i", "value", "j", "index", "num", "val", "base64CharCode", "result", "base64ValueFromCharCode", "cc", "FunctionStack", "funcs", "func", "index", "args", "SettingsCollection", "settings", "orderedKeys", "collection", "key", "sc", "setting", "position", "anchorKey", "index", "object_exports", "values", "value", "keys", "listeners", "ValueElement", "node", "valueNode", "dom_exports", "FunctionStack", "type", "label", "attrs", "input", "ve", "data", "options", "select", "tag", "disabled", "id", "labelElement", "prefix", "labelString", "ButtonGroup", "exclusive", "decheckable", "name", "checked", "x", "container", "displayName", "e", "group", "legendElement", "Slider", "min", "max", "slider", "ItemDealer", "items", "random_default", "n", "seed", "weights", "val", "array_exports", "score", "tryIndex", "item", "index", "factor", "mode", "ratioString", "floor", "percentString", "formatPercent", "x", "digits", "digits_multiplier", "_min", "d0", "d1", "d2", "bx", "ay", "js_levenshtein_default", "a", "b", "tmp", "la", "lb", "offset", "x", "y", "d3", "dd", "dy", "bx0", "bx1", "bx2", "bx3", "vector", "len", "QuizItem", "displayString", "properties", "form", "ItemProperty", "value", "maxDist", "data", "propData", "type", "NumberProperty", "StringProperty", "string", "alternatives", "ListProperty", "guess", "grade", "sol", "dist", "text", "span", "a", "b", "distanceMode", "number", "caseSensitive", "substitutions", "js_levenshtein_default", "str", "pattern", "replacement", "listMode", "splitter", "excludeFromList", "object_exports", "val", "values", "SubString", "s", "x", "guesses", "guessScores", "valueScores", "i", "j", "score", "alt", "array_exports", "subStrings", "grades", "source", "nodes", "pos", "subString", "_SubString", "start", "end", "includeEmpty", "result", "matches", "match", "startTrim", "endTrim", "dom_exports", "Game", "dataset", "items", "properties", "language", "ItemDealer", "FunctionStack", "propType", "symbol", "object_exports", "prop", "input", "gameInputs", "event", "evalsContainer", "property", "evalElement", "value", "key", "element", "font", "data", "font_exports", "weightRange", "min", "max", "x", "weight", "weightSlider", "Slider", "SettingsCollection", "referenceItems", "seed", "score", "item", "propertyKey", "grade", "guessNodes", "solutionNodes", "ItemProperty", "referenceNodes", "node", "ListProperty", "form", "guess", "grades", "_", "index", "container", "scale", "which", "el", "range", "array_exports", "STYLE_PROPERTIES", "BLOCK_KEYS", "ItemSelector", "items", "dataset", "FunctionStack", "itemsActive", "checkedForms", "datasetKey", "dom_exports", "item", "index", "blocks", "data", "object_exports", "blockIndices", "block", "blockIndex", "indexWithinBlock", "element", "e", "m", "n", "pos", "labelStart", "labelEnd", "labelString", "labelElement", "_", "labelElements", "node", "styles", "style", "prop", "value", "type", "content", "indices", "boolean", "trueClasses", "falseClasses", "className", "i", "j", "groupIndex", "event", "button", "blockNode", "indicesKey", "startIndex", "stopIndex", "minmax", "startRow", "startColumn", "divrem", "stopRow", "stopColumn", "transposedStartIndex", "transposedStopIndex", "transposedRange", "residue", "subsets", "allowGaps", "result", "covered", "subset", "x", "uncovered", "scale", "forms", "formsString", "updateIfDisabled", "checked", "callUpdateListeners", "count", "buttons", "active", "val", "id", "symbolElement", "font_exports", "label", "labelData", "labelContent", "splitter", "ButtonGroup", "p", "keys", "key", "l", "v", "a", "str", "vals", "start", "stop", "step", "b", "rem", "dom_exports", "DATASETS_METADATA", "DEFAULT_DATASET", "DEFAULT_METADATA", "DEFAULT_FORMSDATA", "DEFAULT_LANGUAGEDATA", "LANGUAGES", "Dataset", "data", "key", "resolve", "response", "dataset", "variantsData", "checked", "settings", "SettingsCollection", "checkedProperties", "checkedLanguage", "ButtonGroup", "object_exports", "p", "label", "selected", "variants", "ValueElement", "variant", "ItemSelector", "font", "baseFont", "setting", "symbolsData", "rows", "items", "item", "index", "itemData", "e", "template", "i", "row", "value", "DatasetItem", "properties", "taggedKey", "splitKey", "tag", "display", "forms", "invalidKeys", "itemIndices", "language", "displayStrings", "itemProperties", "form", "string", "QuizItem", "propsData", "property", "propData", "newPropData", "itemsProperties", "result", "element", "gameHeading", "font_exports", "container", "els", "no", "symbol", "el", "error", "displayForms", "propertyKeys", "langKey", "prop", "ItemProperty", "acc", "GameContext", "SettingsCollection", "ValueElement", "settingsJSON", "settings", "base64_exports", "select", "dom_exports", "object_exports", "DATASETS_METADATA", "data", "key", "Dataset", "dataset", "cachedSettings", "gameHeading", "fonts", "e", "selector", "args", "singleButton", "datasetKey", "properties", "language", "items", "referenceItems", "Game", "seed", "playing", "searchParams", "DEFAULT_DATASET", "readDarkLightMode", "GameContext", "element", "setupRibbon", "dom_exports", "params", "container", "closable", "contents", "inputs", "openId", "input", "ribbonButtonsChangeListener", "event", "previousOpenId"]
}
